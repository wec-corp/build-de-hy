"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2670],{87643:function(e,t,i){var l=i(67294),n=i(39153),a=i(45243),r=i.n(a),d=i(29291),o=i(92893),c=i(36637);t.Z=e=>{let t=(0,n.Sx)(),{filteredDCanhList:i,handleDCanhClick:a,layerLabelState:s,legendData:h,focusedId:u}=(0,d.Y)(),m=l.useRef(null),g=l.useRef({}),f=l.useRef(null),b=e.data||i;return l.useEffect(()=>{if(!t.getPane("dcanhPane")){let e=t.createPane("dcanhPane");e.style.zIndex="652",e.style.pointerEvents="auto"}},[t]),l.useEffect(()=>{if(m.current&&t.removeLayer(m.current),!b||0===b.length)return;let e=r().featureGroup();return m.current=e,b.forEach(t=>{let i=t.toaDo;if(!i)return;if("string"==typeof i)try{i=JSON.parse(i)}catch(e){return}if(!i.geometry||!i.geometry.coordinates)return;let l=i.geometry.coordinates,n=t.color||"#FF9800";if(!Array.isArray(l)||l.length<2)return;let d=l[1],u=l[0],m=(0,o.oN)(h,t),f=(0,c.L)(d,u,m,n,{pane:"dcanhPane"});t.maLoaiCongTrinh&&s[t.maLoaiCongTrinh]&&f.bindTooltip(t.tenDCanh,{permanent:!0,className:"map-label dcanh-label",opacity:1}),f.on("click",e=>{a(t,[e.latlng.lat,e.latlng.lng]),r().DomEvent.stopPropagation(e)}),e.addLayer(f),t.id&&(g.current[t.id]=f)}),e.addTo(t),e.bringToFront(),()=>{m.current&&t.removeLayer(m.current)}},[b,t,a,s,h]),l.useEffect(()=>{if(!t)return;let e=()=>{let e=t.getZoom();setTimeout(()=>{document.querySelectorAll(".dcanh-label").forEach(t=>{e<12?(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.classList.add("DCanh-hidden-tooltip")):(t.style.display="block",t.style.opacity="1",t.style.visibility="visible",t.classList.remove("DCanh-hidden-tooltip"))})},100)};return t.on("zoomend",e),e(),()=>{t.off("zoomend",e)}},[t]),l.useEffect(()=>{if(f.current){try{t.removeLayer(f.current)}catch(e){}f.current=null}if(!u)return;let e=g.current[u];if(e)try{if(e.getLatLng){let i=e.getLatLng();t.flyTo(i,Math.max(t.getZoom(),15),{duration:.75});let l=r().circleMarker(i,{radius:10,color:"#ff9800",weight:3,opacity:.9,fillColor:"#ff9800",fillOpacity:.15,pane:"dcanhPane"});l.addTo(t),l.bringToFront(),f.current=l;return}}catch(e){console.error("Kh\xf4ng thể zoom tới điểm canh đ\xea đ\xe3 chọn:",e)}},[u,t]),l.useEffect(()=>()=>{if(f.current)try{t.removeLayer(f.current)}catch(e){}},[t]),null}},36637:function(e,t,i){i.d(t,{L:function(){return a}});var l=i(45243),n=i.n(l);function a(e,t,i,l,a){let r=["polygon","rect","path","circle","ellipse","line","polyline"],d=/(fill|stroke)="#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})"/g.test(i)&&!/(fill|stroke)="#ededed"/g.test(i)||/(fill|stroke)="(red|blue)"/g.test(i)||/<g transform/g.test(i),o=i;d||(o=i.replace(/fill="[^"]*"/g,'fill="'.concat(l,'"')).replace(/stroke="[^"]*"/g,'stroke="'.concat(l,'"')),/fill=/.test(o)||r.forEach(e=>{let t=RegExp("<".concat(e,"([^>]*)"),"gi");o=o.replace(t,"<".concat(e,'$1 fill="').concat(l,'" stroke="').concat(l,'" fill-opacity="0.8" stroke-opacity="1"'))})),o&&("string"!=typeof o||""!==o.trim())||(o='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="8" fill="'.concat(l,'" stroke="#333" stroke-width="1"/></svg>'));let c=[24,24],s=[12,12],h=i.match(/width="(\d+)"/),u=i.match(/height="(\d+)"/);if(h&&u){let e=parseInt(h[1],10),t=parseInt(u[1],10);if(16===e&&16===t)c=[16,16],s=[8,8];else if(e>40||t>40){let i=24/Math.max(e,t);c=[Math.floor(e*i),Math.floor(t*i)],s=[Math.floor(e*i/2),Math.floor(t*i/2)]}else c=[e,t],s=[Math.floor(e/2),Math.floor(t/2)]}let m=n().divIcon({className:"custom-svg-marker",html:o,iconSize:c,iconAnchor:s}),g=n().marker([e,t],{icon:m,...a}),f=new Map;return g.on("mouseover",()=>{let e=g.getElement();e&&r.forEach(t=>{e.querySelectorAll(t).forEach(e=>{f.has(e)||f.set(e,{fill:e.getAttribute("fill")||void 0,stroke:e.getAttribute("stroke")||void 0}),e.setAttribute("fill","#fff"),e.setAttribute("stroke","#333"),e.setAttribute("fill-opacity","0.9"),e.setAttribute("stroke-opacity","1"),e.setAttribute("stroke-width","1.5")})})}),g.on("mouseout",()=>{let e=g.getElement();e&&r.forEach(t=>{e.querySelectorAll(t).forEach(e=>{let t=f.get(e);t?(t.fill&&e.setAttribute("fill",t.fill),t.stroke&&e.setAttribute("stroke",t.stroke)):(e.setAttribute("fill",l),e.setAttribute("stroke",l)),e.setAttribute("fill-opacity","0.8"),e.setAttribute("stroke-opacity","1"),e.setAttribute("stroke-width","1")})})}),g}},12670:function(e,t,i){i.r(t),i.d(t,{default:function(){return B}});var l=i(85893),n=i(67294),a=i(60990),r=i(21038),d=i(52857),o=i(93454),c=i(96788),s=i(26624),h=i(28907),u=i(68573),m=i(40492),g=i(95611),f=i(6897),b=i(94143),x=i(29346),p=i(15972),y=i(51015),T=i(39892),j=i(35299),v=i(62987),W=i(4145),Z=i(29291),C=i(69200),k=i(89331),D=i(17071),L=i(89090),S=i(53839),w=i(88196),I=i(92365),K=i(40110),A=i(96727),P=i(55395),E=i(2323),N=i(647),z=i(87643),M=i(76465),V=i(16855),H=i(83063),R=i(48568),X=i(61756),F=i(36280),q=i(51052);let G=[{label:"Hạt quản l\xfd đ\xea",value:"hatqly",columns:[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenHatQL",label:"T\xean hạt quản l\xfd",minWidth:200,align:"left"},{id:"viTriKm",label:"Vị tr\xed Km",minWidth:100,align:"center"},{id:"diaChi",label:"Địa chỉ",minWidth:180,align:"left"},{id:"thuocHuyen",label:"Thuộc huyện",minWidth:120,align:"left"},{id:"dienThoai",label:"Điện thoại",minWidth:120,align:"center"},{id:"fax",label:"Fax",minWidth:100,align:"center"},{id:"namXD",label:"Năm XD",minWidth:80,align:"center"},{id:"tenTuyenDe",label:"Tuyến đ\xea",minWidth:150,align:"left"},{id:"actions",label:"Thao t\xe1c",pinned:"right",minWidth:150,align:"center"}]},{label:"Cột km",value:"cotkm",columns:[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenTuyenDe",label:"Tuyến đ\xea",minWidth:200,align:"left"},{id:"tenDoanDe",label:"Đoạn đ\xea",minWidth:150,align:"left"},{id:"viTri",label:"Vị tr\xed (Km)",minWidth:120,align:"center"},{id:"tenLoaiCongTrinh",label:"Loại c\xf4ng tr\xecnh",minWidth:150,align:"left"},{id:"ngayTao",label:"Ng\xe0y tạo",minWidth:120,align:"center",format:e=>e?new Date(e).toLocaleDateString("vi-VN"):""},{id:"actions",label:"Thao t\xe1c",pinned:"right",minWidth:150,align:"center"}]},{label:"C\xe2y chắn s\xf3ng",value:"caychansong",columns:[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenCay",label:"Loại c\xe2y",minWidth:150,align:"left"},{id:"tenTuyenDe",label:"Tuyến đ\xea",minWidth:180,align:"left"},{id:"tenDoanDe",label:"Đoạn đ\xea",minWidth:150,align:"left"},{id:"viTri",label:"Vị tr\xed (Km)",minWidth:100,align:"center"},{id:"soLuong",label:"Số lượng",minWidth:100,align:"center"},{id:"chieuCao",label:"Chiều cao (m)",minWidth:120,align:"center"},{id:"tuoi",label:"Tuổi (năm)",minWidth:100,align:"center"},{id:"tinhTrang",label:"T\xecnh trạng",minWidth:120,align:"left"},{id:"moTa",label:"M\xf4 tả",minWidth:200,align:"left"},{id:"actions",label:"Thao t\xe1c",pinned:"right",minWidth:150,align:"center"}]},{label:"Điểm canh",value:"dcanh",columns:[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenDiem",label:"T\xean điểm canh",minWidth:200,align:"left"},{id:"tenTuyenDe",label:"Tuyến đ\xea",minWidth:180,align:"left"},{id:"tenDoanDe",label:"Đoạn đ\xea",minWidth:150,align:"left"},{id:"viTri",label:"Vị tr\xed (Km)",minWidth:100,align:"center"},{id:"loaiDiem",label:"Loại điểm",minWidth:120,align:"left"},{id:"nguoiCanh",label:"Người canh",minWidth:150,align:"left"},{id:"dienThoai",label:"Điện thoại",minWidth:120,align:"center"},{id:"ghiChu",label:"Ghi ch\xfa",minWidth:200,align:"left"},{id:"actions",label:"Thao t\xe1c",pinned:"right",minWidth:150,align:"center"}]},{label:"Cửa khẩu",value:"cuakhau",columns:[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenCuaKhau",label:"T\xean cửa khẩu",minWidth:200,align:"left"},{id:"tenTuyenDe",label:"Tuyến đ\xea",minWidth:150,align:"left"},{id:"tenDoanDe",label:"Đoạn đ\xea",minWidth:150,align:"left"},{id:"diaDiem",label:"Địa điểm",minWidth:150,align:"left"},{id:"viTri",label:"Vị tr\xed (Km)",minWidth:100,align:"center"},{id:"kichThuoc",label:"K\xedch thước (m)",minWidth:100,align:"center"},{id:"caoTrinhDinh",label:"Cao tr\xecnh đỉnh (m)",minWidth:120,align:"center"},{id:"caoTrinhNen",label:"Cao tr\xecnh nền (m)",minWidth:120,align:"center"},{id:"vatLieu",label:"Vật liệu",minWidth:120,align:"left"},{id:"coCuaDong",label:"Cửa đ\xf3ng",minWidth:100,align:"center",format:e=>e?"C\xf3":"Kh\xf4ng"},{id:"coVanHanhTuDong",label:"Vận h\xe0nh tự động",minWidth:120,align:"center",format:e=>e?"C\xf3":"Kh\xf4ng"},{id:"ghiChu",label:"Ghi ch\xfa",minWidth:200,align:"left"},{id:"actions",label:"Thao t\xe1c",pinned:"right",minWidth:150,align:"center"}]},{label:"Kho vật tư",value:"khovattu",columns:[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenKho",label:"T\xean kho",minWidth:200,align:"left"},{id:"loaiKho",label:"Loại kho",minWidth:120,align:"left"},{id:"tenTuyenDe",label:"Tuyến đ\xea",minWidth:150,align:"left"},{id:"tenDoanDe",label:"Đoạn đ\xea",minWidth:150,align:"left"},{id:"viTriKM",label:"Vị tr\xed (Km)",minWidth:100,align:"center"},{id:"kichThuoc",label:"K\xedch thước",minWidth:120,align:"left"},{id:"ketCau",label:"Kết cấu",minWidth:120,align:"left"},{id:"vatTu",label:"Vật tư dự trữ",minWidth:180,align:"left"},{id:"namXD",label:"Năm XD",minWidth:100,align:"center"},{id:"moTa",label:"M\xf4 tả",minWidth:200,align:"left"},{id:"actions",label:"Thao t\xe1c",pinned:"right",minWidth:150,align:"center"}]}],_=()=>{let[e,t]=(0,n.useState)(0),[i,_]=(0,n.useState)(0),[B,Q]=(0,n.useState)(""),[O,Y]=(0,n.useState)(""),[J,$]=(0,n.useState)(""),{filteredCotKMList:U,filteredCuaKhauList:ee,filteredKhoVatTuList:et,filteredDCanhList:ei,filteredHatQlyDeList:el,setFocusedId:en,handleDataChange:ea}=(0,Z.Y)(),[er,ed]=(0,n.useState)(!1),[eo,ec]=(0,n.useState)(null),[es,eh]=(0,n.useState)(null),[eu,em]=(0,n.useState)(!1),[eg,ef]=(0,n.useState)(null),eb=[{id:1,ten:"Đặc biệt"},{id:2,ten:"Cấp I"},{id:3,ten:"Cấp II"},{id:4,ten:"Cấp III"},{id:5,ten:"Cấp IV"},{id:6,ten:"Cấp V"}],ex=e=>{$(e.target.value)},ep=(0,n.useCallback)(e=>{if(!(null==e?void 0:e.id))return;let t=e.id===eg?null:e.id;ef(t),en(t)},[eg,en,ef]),ey=e=>(0,l.jsxs)(a.Z,{sx:{display:"flex",gap:1},children:[(0,l.jsx)(r.Z,{title:"Xem tr\xean bản đồ",children:(0,l.jsx)(d.Z,{size:"small",color:eg===e.id?"success":"default",onClick:()=>ep(e),children:(0,l.jsx)(k.Z,{fontSize:"small"})})}),(0,l.jsx)(r.Z,{title:"Chỉnh sửa",children:(0,l.jsx)(d.Z,{size:"small",color:"primary",onClick:()=>{ec(e),ed(!0)},children:(0,l.jsx)(D.Z,{fontSize:"small"})})}),(0,l.jsx)(r.Z,{title:"X\xf3a",children:(0,l.jsx)(d.Z,{size:"small",color:"error",onClick:()=>eh(e),children:(0,l.jsx)(L.Z,{fontSize:"small"})})})]}),eT=async()=>{if(null==es?void 0:es.id){em(!0);try{switch(e){case 0:await F.Z.deleteHatQlyDe(es.id);break;case 1:await V.f.deleteCotKM(es.id);break;case 3:await H.a.deleteDiemCanhDe(es.id);break;case 4:await R.s.deleteCuaKhau(es.id);break;case 5:await X.d.deleteKhoVatTu(es.id)}ea&&ea()}catch(e){console.error("Lỗi khi x\xf3a:",e)}finally{em(!1),eh(null)}}},ej=(()=>{switch(e){case 0:return el;case 1:return U;case 2:default:return[];case 3:return ei;case 4:return ee;case 5:return et}})();return(0,l.jsxs)(a.Z,{children:[(0,l.jsx)(o.Z,{sx:{p:2,mb:3},children:(0,l.jsx)(c.Z,{variant:"h5",children:"HIỆN TRẠNG C\xd4NG TR\xccNH PHỤ TRỢ Đ\xca TRƯỚC LŨ"})}),(0,l.jsx)(o.Z,{sx:{mb:2},children:(0,l.jsx)(s.Z,{value:e,onChange:(e,i)=>{t(i),_(0)},variant:"scrollable",scrollButtons:"auto",children:G.map(e=>(0,l.jsx)(h.Z,{label:e.label},e.value))})}),(0,l.jsx)(o.Z,{sx:{p:2,mb:3,height:"45vh"},children:(0,l.jsx)(u.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",style:{height:"100%"},children:(0,l.jsx)(u.ZP,{item:!0,xs:12,style:{height:"100%",position:"relative"},children:(0,l.jsxs)(C.default,{boundaryFile:"",children:[0===e&&(0,l.jsx)(M.Z,{}),1===e&&(0,l.jsx)(P.Z,{}),3===e&&(0,l.jsx)(z.Z,{}),4===e&&(0,l.jsx)(E.Z,{}),5===e&&(0,l.jsx)(N.Z,{})]})})})}),(0,l.jsx)(o.Z,{sx:{p:2,mb:2},children:(0,l.jsxs)(u.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,l.jsx)(u.ZP,{item:!0,xs:12,md:2,children:(0,l.jsx)(m.Z,{size:"small",fullWidth:!0,label:"T\xecm kiếm tuyến đ\xea",variant:"outlined",value:B,onChange:e=>{Q(e.target.value)},InputProps:{startAdornment:(0,l.jsx)(g.Z,{position:"start",children:(0,l.jsx)(j.Z,{})})}})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,md:2,children:(0,l.jsxs)(f.Z,{fullWidth:!0,children:[(0,l.jsx)(b.Z,{id:"loai-de-label",children:"Loại đoạn đ\xea"}),(0,l.jsxs)(x.Z,{size:"small",labelId:"loai-ke-label",value:O,label:"Loại đoạn đ\xea",onChange:e=>{Y(e.target.value)},children:[(0,l.jsx)(p.Z,{value:"",children:(0,l.jsx)("em",{children:"Tất cả"})}),[{id:1,ten:"Đ\xea s\xf4ng"},{id:2,ten:"Đ\xea cửa s\xf4ng"},{id:3,ten:"Đ\xea biển"},{id:4,ten:"Đ\xea bối"}].map(e=>(0,l.jsx)(p.Z,{value:e.ten,children:e.ten},e.id))]})]})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,md:2,children:(0,l.jsxs)(f.Z,{fullWidth:!0,children:[(0,l.jsx)(b.Z,{id:"cap-de-label",children:"Kết cấu"}),(0,l.jsxs)(x.Z,{size:"small",labelId:"cap-de-label",value:J,label:"Cấp đ\xea",onChange:ex,children:[(0,l.jsx)(p.Z,{value:"",children:(0,l.jsx)("em",{children:"Tất cả"})}),eb.map(e=>(0,l.jsx)(p.Z,{value:e.ten,children:e.ten},e.id))]})]})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,md:2,children:(0,l.jsxs)(f.Z,{fullWidth:!0,children:[(0,l.jsx)(b.Z,{id:"cap-de-label",children:"Địa danh x\xe3 "}),(0,l.jsxs)(x.Z,{size:"small",labelId:"cap-de-label",value:J,label:"Cao tr\xecnh đ\xea",onChange:ex,children:[(0,l.jsx)(p.Z,{value:"",children:(0,l.jsx)("em",{children:" x\xe3 "})}),eb.map(e=>(0,l.jsx)(p.Z,{value:e.ten},e.id))]})]})}),(0,l.jsx)(u.ZP,{item:!0,xs:6,md:1,children:(0,l.jsx)(y.Z,{variant:"contained",fullWidth:!0,startIcon:(0,l.jsx)(v.Z,{}),children:"Lọc"})}),(0,l.jsx)(u.ZP,{item:!0,xs:6,md:1,children:(0,l.jsx)(y.Z,{variant:"outlined",fullWidth:!0,onClick:()=>{Q(""),Y(""),$("")},startIcon:(0,l.jsx)(W.Z,{}),children:"X\xf3a"})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,md:1,children:(0,l.jsx)(y.Z,{variant:"outlined",startIcon:(0,l.jsx)(S.Z,{}),onClick:()=>{ec(null),ed(!0)},children:"Th\xeam mới"})})]})}),(0,l.jsx)(o.Z,{sx:{p:2},children:(0,l.jsx)(T.Z,{columns:G[e].columns,rows:ej,loading:!1,pagination:!0,totalItems:ej.length,actions:e=>ey(e),selectedRowId:eg,page:i,onPageChange:e=>_(e)})}),0===e&&(0,l.jsx)(q.Z,{open:er,onClose:()=>{ed(!1),ec(null)},onSaveComplete:()=>{ed(!1),ec(null),ea&&ea()},editItem:eo}),(0,l.jsxs)(w.Z,{open:!!es,onClose:()=>eh(null),children:[(0,l.jsx)(I.Z,{children:"X\xe1c nhận x\xf3a"}),(0,l.jsxs)(K.Z,{children:["Bạn c\xf3 chắc chắn muốn x\xf3a"," ",(0,l.jsx)("b",{children:(null==es?void 0:es.tenHatQL)||(null==es?void 0:es.tenCuaKhau)||(null==es?void 0:es.tenKho)||(null==es?void 0:es.tenDiemCanh)||(null==es?void 0:es.viTri)||"mục n\xe0y"}),"?"]}),(0,l.jsxs)(A.Z,{children:[(0,l.jsx)(y.Z,{onClick:()=>eh(null),disabled:eu,children:"Hủy"}),(0,l.jsx)(y.Z,{onClick:eT,color:"error",disabled:eu,children:eu?"Đang x\xf3a...":"X\xf3a"})]})]})]})};var B=()=>(0,l.jsx)(Z.x,{children:(0,l.jsx)(_,{})})}}]);