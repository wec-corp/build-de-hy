"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5077],{85077:function(l,e,i){i.r(e),i.d(e,{default:function(){return G}});var n=i(85893),a=i(67294),t=i(60990),s=i(21038),d=i(52857),r=i(93454),c=i(96788),h=i(26624),o=i(28907),x=i(68573),u=i(40492),m=i(95611),j=i(6897),Z=i(94143),b=i(29346),g=i(15972),v=i(51015),C=i(39892),p=i(35299),f=i(62987),k=i(4145),W=i(29291),T=i(69200),I=i(42638),K=i(17071),S=i(53839),y=i(66417),L=i(83857),P=i(60553),z=i(72744),w=i(88196),_=i(92365),D=i(40110),A=i(96727);let N=[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenKe",label:"T\xean k\xe8",minWidth:150,align:"left"},{id:"tenTuyenDe",label:"Tuyến đ\xea",minWidth:150,align:"left"},{id:"tenDoanDe",label:"Đoạn đ\xea",minWidth:150,align:"left"},{label:"Vị tr\xed",children:[{id:"viTri",label:"Km (từ)",align:"center",minWidth:100},{id:"viTriDen",label:"Km (đến)",align:"center",minWidth:100}],id:""},{id:"diaDiem",label:"Địa điểm",minWidth:170,align:"left"},{id:"chieuDai",label:"Chiều d\xe0i (m)",minWidth:100,align:"left",format:l=>l||"-"},{label:"Cao tr\xecnh (m)",children:[{id:"caoTrinhDauKe",label:"Đầu k\xe8",align:"center",minWidth:100},{id:"caoTrinhCuoiKe",label:"Cuối k\xe8",align:"center",minWidth:100}],id:""},{id:"vatLieu",label:"Vật liệu",minWidth:120,align:"left"},{id:"hienTrang",label:"Hiện trạng",minWidth:150,align:"left"},{id:"danhGia",label:"Đ\xe1nh gi\xe1",minWidth:200,align:"left"},{id:"ghiChu",label:"Ghi ch\xfa",minWidth:200,align:"left"},{id:"actions",label:"Thao t\xe1c",minWidth:100,align:"center",pinned:"right"}],X=[...N],E=[...N];[...N];let H=[{label:"K\xe8 mỏ h\xe0n",value:"mohan",maLoai:"KE_MO_HAN",columns:X},{label:"K\xe8 l\xe1t m\xe1i",value:"latmai",maLoai:"KE_LAT_MAI",columns:E}],V=()=>{let[l,e]=(0,a.useState)(0),[i,N]=(0,a.useState)(""),[X,E]=(0,a.useState)(""),[V,G]=(0,a.useState)(""),M=[{id:1,ten:"Đặc biệt"},{id:2,ten:"Cấp I"},{id:3,ten:"Cấp II"},{id:4,ten:"Cấp III"},{id:5,ten:"Cấp IV"},{id:6,ten:"Cấp V"}],R=l=>{G(l.target.value)},{filteredKeList:B,handleKeClick:F,setFocusedId:O,handleDataChange:Y}=(0,W.Y)(),[q,J]=(0,a.useState)(!1),[Q,U]=(0,a.useState)(null),[$,ll]=(0,a.useState)(null),[le,li]=(0,a.useState)(!1),[ln]=(0,a.useState)(!1),[la,lt]=(0,a.useState)(null),ls=(0,a.useCallback)(l=>{if(!(null==l?void 0:l.id))return;let e=l.id===la?null:l.id;lt(e),O(e)},[la,O]),ld=l=>(0,n.jsxs)(t.Z,{sx:{display:"flex",gap:1},children:[(0,n.jsx)(s.Z,{title:"Xem tr\xean bản đồ",children:(0,n.jsx)(d.Z,{size:"small",color:la===l.id?"success":"default",onClick:()=>ls(l),children:(0,n.jsx)(y.Z,{fontSize:"small"})})}),(0,n.jsx)(s.Z,{title:"Chỉnh sửa",children:(0,n.jsx)(d.Z,{size:"small",color:"primary",onClick:()=>{U(l),J(!0)},children:(0,n.jsx)(K.Z,{fontSize:"small"})})}),(0,n.jsx)(s.Z,{title:"X\xf3a",children:(0,n.jsx)(d.Z,{size:"small",color:"error",onClick:()=>ll(l),children:(0,n.jsx)(L.Z,{fontSize:"small"})})})]}),lr=async()=>{(null==$?void 0:$.id)&&(li(!0),await z.M.deleteKe($.id),li(!1),ll(null),Y&&Y())},lc=B.filter(e=>{var i,n;let a=H[l].label.toLowerCase();return(null===(i=e.loaiCongTrinh)||void 0===i?void 0:i.toLowerCase().includes(a))||(null===(n=e.loaiCongTrinh)||void 0===n?void 0:n.toLowerCase().includes(a))});return(0,n.jsxs)(t.Z,{children:[(0,n.jsx)(r.Z,{sx:{p:2,mb:3},children:(0,n.jsx)(c.Z,{variant:"h5",children:"HIỆN TRẠNG K\xc8 TRƯỚC LŨ"})}),(0,n.jsx)(r.Z,{sx:{mb:2},children:(0,n.jsx)(h.Z,{value:l,onChange:(l,i)=>{e(i)},variant:"scrollable",scrollButtons:"auto",children:H.map(l=>(0,n.jsx)(o.Z,{label:l.label},l.value))})}),(0,n.jsx)(r.Z,{sx:{p:2,mb:3,height:"45vh"},children:(0,n.jsx)(x.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",style:{height:"100%"},children:(0,n.jsx)(x.ZP,{item:!0,xs:12,style:{height:"100%",position:"relative"},children:(0,n.jsx)(T.default,{boundaryFile:"",children:(0,n.jsx)(I.Z,{data:B,onKeClick:F})})})})}),(0,n.jsx)(r.Z,{sx:{p:2,mb:2},children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,md:2,children:(0,n.jsx)(u.Z,{size:"small",fullWidth:!0,label:"T\xecm kiếm tuyến đ\xea",variant:"outlined",value:i,onChange:l=>{N(l.target.value)},InputProps:{startAdornment:(0,n.jsx)(m.Z,{position:"start",children:(0,n.jsx)(p.Z,{})})}})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:2,children:(0,n.jsxs)(j.Z,{fullWidth:!0,children:[(0,n.jsx)(Z.Z,{id:"loai-de-label",children:"Loại k\xe8"}),(0,n.jsxs)(b.Z,{size:"small",labelId:"loai-ke-label",value:X,label:"Loại k\xe8",onChange:l=>{E(l.target.value)},children:[(0,n.jsx)(g.Z,{value:"",children:(0,n.jsx)("em",{children:"Tất cả"})}),[{id:1,ten:"Đ\xea s\xf4ng"},{id:2,ten:"Đ\xea biển"},{id:3,ten:"Đ\xea bao"}].map(l=>(0,n.jsx)(g.Z,{value:l.ten,children:l.ten},l.id))]})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:2,children:(0,n.jsxs)(j.Z,{fullWidth:!0,children:[(0,n.jsx)(Z.Z,{id:"cap-de-label",children:"Kết cấu"}),(0,n.jsxs)(b.Z,{size:"small",labelId:"cap-de-label",value:V,label:"Cấp đ\xea",onChange:R,children:[(0,n.jsx)(g.Z,{value:"",children:(0,n.jsx)("em",{children:"Tất cả"})}),M.map(l=>(0,n.jsx)(g.Z,{value:l.ten,children:l.ten},l.id))]})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:2,children:(0,n.jsxs)(j.Z,{fullWidth:!0,children:[(0,n.jsx)(Z.Z,{id:"cap-de-label",children:"Địa danh x\xe3 "}),(0,n.jsxs)(b.Z,{size:"small",labelId:"cap-de-label",value:V,label:"Cao tr\xecnh đ\xea",onChange:R,children:[(0,n.jsx)(g.Z,{value:"",children:(0,n.jsx)("em",{children:" x\xe3 "})}),M.map(l=>(0,n.jsx)(g.Z,{value:l.ten},l.id))]})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,md:1,children:(0,n.jsx)(v.Z,{variant:"contained",fullWidth:!0,startIcon:(0,n.jsx)(f.Z,{}),children:"Lọc"})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,md:1,children:(0,n.jsx)(v.Z,{variant:"outlined",fullWidth:!0,onClick:()=>{N(""),E(""),G("")},startIcon:(0,n.jsx)(k.Z,{}),children:"X\xf3a"})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:1,children:(0,n.jsx)(v.Z,{variant:"outlined",fullWidth:!0,onClick:()=>J(!0),startIcon:(0,n.jsx)(S.Z,{}),children:"Th\xeam mới"})})]})}),(0,n.jsx)(r.Z,{sx:{p:2},children:(0,n.jsx)(C.Z,{columns:H[l].columns,rows:lc,loading:ln,pagination:!0,totalItems:lc.length,actions:l=>ld(l),selectedRowId:la})}),(0,n.jsx)(P.Z,{open:q,onClose:()=>{J(!1),U(null)},onSaveComplete:()=>{J(!1),U(null),Y&&Y()},editKe:Q}),(0,n.jsxs)(w.Z,{open:!!$,onClose:()=>ll(null),children:[(0,n.jsx)(_.Z,{children:"X\xe1c nhận x\xf3a k\xe8"}),(0,n.jsxs)(D.Z,{children:["Bạn c\xf3 chắc chắn muốn x\xf3a k\xe8 ",(0,n.jsx)("b",{children:null==$?void 0:$.tenKe}),"?"]}),(0,n.jsxs)(A.Z,{children:[(0,n.jsx)(v.Z,{onClick:()=>ll(null),disabled:le,children:"Hủy"}),(0,n.jsx)(v.Z,{onClick:lr,color:"error",disabled:le,children:le?"Đang x\xf3a...":"X\xf3a"})]})]}),(0,n.jsx)(t.Z,{sx:{mb:2,textAlign:"right"},children:(0,n.jsx)(v.Z,{variant:"contained",onClick:()=>{U(null),J(!0)},children:"Th\xeam mới k\xe8"})})]})};var G=()=>(0,n.jsx)(W.x,{children:(0,n.jsx)(V,{})})}}]);