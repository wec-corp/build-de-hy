"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1004],{76499:function(e,n,i){i.d(n,{CS:function(){return t},IW:function(){return a},ZK:function(){return r},q5:function(){return l}});let t=[{id:"STT",label:"STT",minWidth:60,align:"left"},{id:"tenDoan",label:"Tuyến đ\xea biển đ\xea cửa s\xf4ng",minWidth:180,align:"left"},{label:"Vị tr\xed",children:[{id:"viTriTu",label:"Km (từ)",align:"center",minWidth:100},{id:"viTriDen",label:"Km (đến)",align:"center",minWidth:100}],id:""},{id:"capDe",label:"Cấp đ\xea",minWidth:70,align:"left"},{id:"chieuDai",label:"Chiều d\xe0i (m)",minWidth:80,align:"left"},{label:"Cao tr\xecnh (m)",children:[{id:"matCat.caoTrinhMatDe",label:"Mặt đ\xea",align:"center",minWidth:100},{id:"matTrach",label:"Mặt trạch",align:"center",minWidth:100},{id:"matCat.caoTrinhThietKe",label:"MNTK",align:"center",minWidth:100},{id:"matCat.chenhCao",label:"Ch\xeanh cao (Mặt đ\xea - CT đ\xea TK)",align:"center",minWidth:150}],id:""},{label:"K\xedch thước mặt cắt ngang đ\xea hiện tại",children:[{id:"matCat.beRongMatDe",label:"Bề rộng Mặt đ\xea (m)",align:"center",minWidth:100},{label:"M\xe1i đ\xea ph\xeda biển",children:[{id:"matCat.maiDePhiaSong",label:"Hệ số m\xe1i",align:"center",minWidth:100},{id:"ketCau",label:"Kết cấu",align:"center",minWidth:100}],id:""},{label:"M\xe1i đ\xea ph\xeda đồng",children:[{id:"matCat.maiDePhiaDong",label:"Hệ số m\xe1i",align:"center",minWidth:100},{id:"ketCau2",label:"Kết cấu",align:"center",minWidth:100}],id:""}],id:""},{id:"deBoi.danhGia",label:"Đ\xe1nh gi\xe1 khả năng chống b\xe3o",align:"center",minWidth:200},{id:"matCat.danhGia",label:"Ghi ch\xfa",minWidth:200,align:"left"},{id:"actions",label:"Thao t\xe1c",minWidth:100,align:"center",pinned:"right"}],a=[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenDoan",label:"Tuyến đ\xea s\xf4ng",minWidth:150,align:"left"},{label:"Vị tr\xed",children:[{id:"viTriTu",label:"Km (từ)",align:"center",minWidth:100},{id:"viTriDen",label:"Km (đến)",align:"center",minWidth:100}],id:""},{id:"diaDanh",label:"Địa danh",minWidth:150,align:"left"},{id:"capDe",label:"Cấp đ\xea",minWidth:70,align:"left"},{id:"chieuDai",label:"Chiều d\xe0i (km)",minWidth:80,align:"left"},{label:"Cao tr\xecnh (m)",children:[{id:"matCat",label:"Mặt đ\xea",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.caoTrinhMatDe)||void 0===i?void 0:i.toString())||"-"}},{id:"matTrach",label:"Mặt trạch",align:"center",minWidth:100,format:()=>"-"},{id:"mntk",label:"MNTK",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.caoTrinhThietKe)||void 0===i?void 0:i.toString())||"-"}},{id:"chenhCao",label:"Ch\xeanh cao (Mặt đ\xea - CT đ\xea TK)",align:"center",minWidth:150,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.chenhCao)||void 0===i?void 0:i.toString())||"-"}}],id:""},{label:"K\xedch thước mặt cắt ngang đ\xea hiện tại",children:[{id:"beRongMatDe",label:"Bề rộng Mặt đ\xea (m)",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.beRongMatDe)||void 0===i?void 0:i.toString())||"-"}},{id:"maiDePhiaSong",label:"M\xe1i đ\xea ph\xeda s\xf4ng",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.maiDePhiaSong)||void 0===i?void 0:i.toString())||"-"}},{id:"maiDePhiaDong",label:"M\xe1i đ\xea ph\xeda đồng",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.maiDePhiaDong)||void 0===i?void 0:i.toString())||"-"}},{id:"chieuCaoDe",label:"Chiều cao đ\xea (m)",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.chieuCaoDe)||void 0===i?void 0:i.toString())||"-"}},{id:"chieuRongCoHL",label:"Chiều rộng cơ HL (m)",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.chieuRongCoHL)||void 0===i?void 0:i.toString())||"-"}}],id:""},{id:"danhGiaCaoTrinh",label:"Đ\xe1nh gi\xe1 cao tr\xecnh",align:"center",minWidth:100,format:()=>"-"},{id:"ghiChu",label:"Ghi ch\xfa",minWidth:200,align:"left",format:(e,n)=>{var i;return(null===(i=n.matCat)||void 0===i?void 0:i.danhGia)||"-"}},{id:"actions",label:"Thao t\xe1c",minWidth:100,align:"center",pinned:"right"}],l=[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenDoan",label:"Tuyến đ\xea cửa s\xf4ng",minWidth:150,align:"left"},{label:"Vị tr\xed",children:[{id:"viTriTu",label:"Km (từ)",align:"center",minWidth:100},{id:"viTriDen",label:"Km (đến)",align:"center",minWidth:100}],id:""},{id:"diaDanh",label:"Địa danh",minWidth:150,align:"left"},{id:"capDe",label:"Cấp đ\xea",minWidth:70,align:"left"},{id:"chieuDai",label:"Chiều d\xe0i (km)",minWidth:80,align:"left"},{label:"Cao tr\xecnh (m)",children:[{id:"matCat",label:"Mặt đ\xea",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.caoTrinhMatDe)||void 0===i?void 0:i.toString())||"-"}},{id:"caoTrinhThietKe",label:"Thiết kế",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.caoTrinhThietKe)||void 0===i?void 0:i.toString())||"-"}},{id:"chenhCao",label:"Ch\xeanh cao",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.chenhCao)||void 0===i?void 0:i.toString())||"-"}},{id:"beRongMatDe",label:"Bề rộng mặt đ\xea",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.beRongMatDe)||void 0===i?void 0:i.toString())||"-"}}],id:""},{id:"actions",label:"Thao t\xe1c",minWidth:100,align:"center"}],r=[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenDoan",label:"Tuyến đ\xea bối",minWidth:150,align:"left"},{label:"Vị tr\xed",children:[{id:"viTriTu",label:"Km (từ)",align:"center",minWidth:100},{id:"viTriDen",label:"Km (đến)",align:"center",minWidth:100}],id:""},{id:"diaDanh",label:"Địa danh",minWidth:150,align:"left"},{id:"capDe",label:"Cấp đ\xea",minWidth:70,align:"left"},{id:"chieuDai",label:"Chiều d\xe0i (km)",minWidth:80,align:"left"},{label:"Cao tr\xecnh (m)",children:[{id:"matCat",label:"Mặt đ\xea",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.caoTrinhMatDe)||void 0===i?void 0:i.toString())||"-"}},{id:"caoTrinhThietKe",label:"Thiết kế",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.caoTrinhThietKe)||void 0===i?void 0:i.toString())||"-"}},{id:"chenhCao",label:"Ch\xeanh cao",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.chenhCao)||void 0===i?void 0:i.toString())||"-"}},{id:"beRongMatDe",label:"Bề rộng mặt đ\xea",align:"center",minWidth:100,format:(e,n)=>{var i,t;return(null===(t=n.matCat)||void 0===t?void 0:null===(i=t.beRongMatDe)||void 0===i?void 0:i.toString())||"-"}}],id:""},{id:"actions",label:"Thao t\xe1c",minWidth:100,align:"center"}]},1004:function(e,n,i){i.r(n),i.d(n,{default:function(){return en}});var t=i(85893),a=i(67294),l=i(60990),r=i(26624),d=i(28907),o=i(93454),c=i(68573),h=i(40492),s=i(95611),u=i(6897),m=i(94143),g=i(29346),v=i(15972),x=i(51015),p=i(96788),j=i(88196),D=i(92365),b=i(40110),y=i(95858),Z=i(96727),T=i(84925),C=i(44723),f=i(39892),I=i(5152),W=i.n(I),S=i(35299),k=i(62987),w=i(4145),L=i(53839),P=i(60762),K=i(52857),M=i(25026),z=i(76592),V=i(70360),B=i(46577),N=i(8863),E=i(19827),R=i(97182),A=i(81873),H=i(21038),X=i(83347),G=i(38855),O=i(17071),F=i(89090),_=i(18708),q=e=>{let{onEdit:n,onDelete:i}=e,[r,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),[m,g]=(0,a.useState)(0),[v,x]=(0,a.useState)(0),[j,D]=(0,a.useState)(10),[b,y]=(0,a.useState)(""),[Z,T]=(0,a.useState)({pageNumber:1,pageSize:10}),C=async()=>{u(!0);try{let e=await _.I.getAllDoanDe({...Z,pageNumber:v+1,pageSize:j});d(e.items||[]),g(e.totalItems||0)}catch(e){console.error("Lỗi khi lấy danh s\xe1ch đoạn đ\xea:",e)}finally{u(!1)}};(0,a.useEffect)(()=>{C()},[v,j,Z]);let f=()=>{x(0),T(e=>({...e,tenDoan:""!==b.trim()?b:void 0}))};return(0,t.jsx)(l.Z,{sx:{width:"100%"},children:(0,t.jsxs)(P.Z,{children:[(0,t.jsxs)(l.Z,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,t.jsx)(p.Z,{variant:"h6",component:"h2",sx:{mb:{xs:1,md:0}},children:"Danh s\xe1ch đoạn đ\xea"}),(0,t.jsx)(h.Z,{size:"small",placeholder:"T\xecm kiếm theo t\xean đoạn",value:b,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&f()},InputProps:{startAdornment:(0,t.jsx)(s.Z,{position:"start",children:(0,t.jsx)(K.Z,{size:"small",onClick:f,children:(0,t.jsx)(G.Z,{})})})},sx:{width:{xs:"100%",md:300}}})]}),(0,t.jsx)(M.Z,{component:o.Z,sx:{maxHeight:"calc(100vh - 250px)"},children:(0,t.jsxs)(z.Z,{stickyHeader:!0,children:[(0,t.jsx)(V.Z,{children:(0,t.jsxs)(B.Z,{children:[(0,t.jsx)(N.Z,{width:"5%",children:"STT"}),(0,t.jsx)(N.Z,{width:"20%",children:"T\xean đoạn đ\xea"}),(0,t.jsx)(N.Z,{width:"15%",children:"Tuyến đ\xea"}),(0,t.jsx)(N.Z,{width:"15%",children:"Loại c\xf4ng tr\xecnh"}),(0,t.jsx)(N.Z,{width:"10%",children:"Cấp đ\xea"}),(0,t.jsx)(N.Z,{width:"10%",children:"Vị tr\xed từ"}),(0,t.jsx)(N.Z,{width:"10%",children:"Vị tr\xed đến"}),(0,t.jsx)(N.Z,{width:"10%",children:"Chiều d\xe0i"}),(0,t.jsx)(N.Z,{width:"5%",align:"center",children:"Thao t\xe1c"})]})}),(0,t.jsx)(E.Z,{children:c?(0,t.jsx)(B.Z,{children:(0,t.jsx)(N.Z,{colSpan:9,align:"center",children:(0,t.jsx)(R.Z,{size:30})})}):0===r.length?(0,t.jsx)(B.Z,{children:(0,t.jsx)(N.Z,{colSpan:9,align:"center",children:"Kh\xf4ng c\xf3 dữ liệu"})}):r.map((e,a)=>(0,t.jsxs)(B.Z,{hover:!0,children:[(0,t.jsx)(N.Z,{children:v*j+a+1}),(0,t.jsx)(N.Z,{children:e.tenDoan||"--"}),(0,t.jsx)(N.Z,{children:e.tenTuyenDe||"--"}),(0,t.jsx)(N.Z,{children:e.loaiCongTrinh||"--"}),(0,t.jsx)(N.Z,{children:e.capDe?(0,t.jsx)(A.Z,{size:"small",label:e.capDe,color:"primary",variant:"outlined",sx:{minWidth:60}}):"--"}),(0,t.jsxs)(N.Z,{children:[e.viTriTu," m"]}),(0,t.jsxs)(N.Z,{children:[e.viTriDen," m"]}),(0,t.jsxs)(N.Z,{children:[e.chieuDai," m"]}),(0,t.jsxs)(N.Z,{align:"center",children:[n&&(0,t.jsx)(H.Z,{title:"Sửa",children:(0,t.jsx)(K.Z,{size:"small",onClick:()=>n(e),children:(0,t.jsx)(O.Z,{fontSize:"small"})})}),i&&e.id&&(0,t.jsx)(H.Z,{title:"X\xf3a",children:(0,t.jsx)(K.Z,{size:"small",onClick:()=>i(e.id),children:(0,t.jsx)(F.Z,{fontSize:"small"})})})]})]},e.id))})]})}),(0,t.jsx)(X.Z,{rowsPerPageOptions:[5,10,25,50],component:"div",count:m,rowsPerPage:j,page:v,onPageChange:(e,n)=>{x(n)},onRowsPerPageChange:e=>{D(parseInt(e.target.value,10)),x(0)},labelRowsPerPage:"Số h\xe0ng mỗi trang:",labelDisplayedRows:e=>{let{from:n,to:i,count:t}=e;return"".concat(n,"-").concat(i," của ").concat(t)}})]})})},J=i(56912),Q=i(12283),U=e=>{let{data:n,onSave:i,onCancel:r}=e,[d,o]=(0,a.useState)({id:"",tuyenDeId:"",tenDoan:"",viTriTu:0,viTriDen:0,diaDanh:"",capDeId:"",chieuDai:0}),[s,j]=(0,a.useState)(!1),[D,b]=(0,a.useState)(!1),[y,Z]=(0,a.useState)(!1),[T,C]=(0,a.useState)([]),[f,I]=(0,a.useState)([]),[W,S]=(0,a.useState)({});(0,a.useEffect)(()=>{n&&o({id:n.id||"",tuyenDeId:n.tuyenDeId||"",tenDoan:n.tenDoan||"",viTriTu:n.viTriTu||0,viTriDen:n.viTriDen||0,diaDanh:n.diaDanh||"",capDeId:n.capDeId||"",chieuDai:n.chieuDai||0,toaDo:n.toaDo}),k(),w()},[n]),(0,a.useEffect)(()=>{if(void 0!==d.viTriTu&&void 0!==d.viTriDen){let e=Math.abs(d.viTriDen-d.viTriTu);o(n=>({...n,chieuDai:e}))}},[d.viTriTu,d.viTriDen]);let k=async()=>{b(!0);try{let e=await _.I.getAllTuyenDe({pageNumber:1,pageSize:100},!1);C(e.items||[])}catch(e){console.error("Lỗi khi lấy danh s\xe1ch tuyến đ\xea:",e)}finally{b(!1)}},w=async()=>{Z(!0);try{let e=await _.I.getAllCapDe(1,100,!1);I(e.items||[])}catch(e){console.error("Lỗi khi lấy danh s\xe1ch cấp đ\xea:",e)}finally{Z(!1)}},L=(e,n)=>{o(i=>({...i,[e]:n})),W[e]&&S(n=>{let i={...n};return delete i[e],i})},P=()=>{let e={};return d.tuyenDeId||(e.tuyenDeId="Vui l\xf2ng chọn tuyến đ\xea"),d.tenDoan||(e.tenDoan="Vui l\xf2ng nhập t\xean đoạn đ\xea"),d.capDeId||(e.capDeId="Vui l\xf2ng chọn cấp đ\xea"),(void 0===d.viTriTu||null===d.viTriTu)&&(e.viTriTu="Vui l\xf2ng nhập vị tr\xed bắt đầu"),void 0===d.viTriDen||null===d.viTriDen?e.viTriDen="Vui l\xf2ng nhập vị tr\xed kết th\xfac":d.viTriDen<=d.viTriTu&&(e.viTriDen="Vị tr\xed kết th\xfac phải lớn hơn vị tr\xed bắt đầu"),S(e),0===Object.keys(e).length},K=async()=>{if(P()){j(!0);try{await i(d)}catch(e){console.error("Lỗi khi lưu đoạn đ\xea:",e)}finally{j(!1)}}};return(0,t.jsxs)(l.Z,{component:"form",noValidate:!0,autoComplete:"off",sx:{mt:2},children:[(0,t.jsxs)(c.ZP,{container:!0,spacing:3,children:[(0,t.jsxs)(c.ZP,{item:!0,xs:12,children:[(0,t.jsx)(p.Z,{variant:"subtitle1",gutterBottom:!0,children:"Th\xf4ng tin cơ bản"}),(0,t.jsx)(J.Z,{sx:{mb:2}})]}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,t.jsxs)(u.Z,{fullWidth:!0,error:!!W.tuyenDeId,children:[(0,t.jsx)(m.Z,{id:"tuyen-de-label",children:"Tuyến đ\xea"}),(0,t.jsx)(g.Z,{labelId:"tuyen-de-label",value:d.tuyenDeId||"",label:"Tuyến đ\xea",onChange:e=>L("tuyenDeId",e.target.value),disabled:D,children:D?(0,t.jsxs)(v.Z,{value:"",disabled:!0,children:[(0,t.jsx)(R.Z,{size:20})," Đang tải..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{value:"",children:(0,t.jsx)("em",{children:"-- Chọn tuyến đ\xea --"})}),T.map(e=>(0,t.jsx)(v.Z,{value:e.id,children:e.tenTuyenDe},e.id))]})}),W.tuyenDeId&&(0,t.jsx)(Q.Z,{children:W.tuyenDeId})]})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,t.jsxs)(u.Z,{fullWidth:!0,error:!!W.capDeId,children:[(0,t.jsx)(m.Z,{id:"cap-de-label",children:"Cấp đ\xea"}),(0,t.jsx)(g.Z,{labelId:"cap-de-label",value:d.capDeId||"",label:"Cấp đ\xea",onChange:e=>L("capDeId",e.target.value),disabled:y,children:y?(0,t.jsxs)(v.Z,{value:"",disabled:!0,children:[(0,t.jsx)(R.Z,{size:20})," Đang tải..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{value:"",children:(0,t.jsx)("em",{children:"-- Chọn cấp đ\xea --"})}),f.map(e=>(0,t.jsx)(v.Z,{value:e.id,children:e.tenCap},e.id))]})}),W.capDeId&&(0,t.jsx)(Q.Z,{children:W.capDeId})]})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(h.Z,{fullWidth:!0,label:"T\xean đoạn đ\xea",value:d.tenDoan||"",onChange:e=>L("tenDoan",e.target.value),error:!!W.tenDoan,helperText:W.tenDoan,required:!0})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(h.Z,{fullWidth:!0,label:"Địa danh",value:d.diaDanh||"",onChange:e=>L("diaDanh",e.target.value)})}),(0,t.jsxs)(c.ZP,{item:!0,xs:12,children:[(0,t.jsx)(p.Z,{variant:"subtitle1",gutterBottom:!0,children:"Th\xf4ng tin vị tr\xed"}),(0,t.jsx)(J.Z,{sx:{mb:2}})]}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(h.Z,{fullWidth:!0,label:"Vị tr\xed từ (m)",type:"number",value:d.viTriTu||"",onChange:e=>L("viTriTu",parseFloat(e.target.value)||0),error:!!W.viTriTu,helperText:W.viTriTu,required:!0,inputProps:{step:"any"}})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(h.Z,{fullWidth:!0,label:"Vị tr\xed đến (m)",type:"number",value:d.viTriDen||"",onChange:e=>L("viTriDen",parseFloat(e.target.value)||0),error:!!W.viTriDen,helperText:W.viTriDen,required:!0,inputProps:{step:"any"}})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(h.Z,{fullWidth:!0,label:"Chiều d\xe0i (m)",type:"number",value:d.chieuDai||"",InputProps:{readOnly:!0},helperText:"Tự động t\xednh to\xe1n từ vị tr\xed"})})]}),(0,t.jsxs)(l.Z,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[(0,t.jsx)(x.Z,{variant:"outlined",onClick:r,disabled:s,children:"Hủy bỏ"}),(0,t.jsx)(x.Z,{variant:"contained",onClick:K,disabled:s,startIcon:s?(0,t.jsx)(R.Z,{size:20,color:"inherit"}):null,children:s?"Đang lưu...":"Lưu"})]})]})},Y=i(76499);let $=W()(()=>Promise.all([i.e(9269),i.e(3804)]).then(i.bind(i,23804)),{loadableGenerated:{webpack:()=>[23804]},ssr:!1});function ee(e){let{children:n,value:i,index:a,...r}=e;return(0,t.jsx)("div",{role:"tabpanel",hidden:i!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a),...r,children:i===a&&(0,t.jsx)(l.Z,{sx:{pt:3},children:n})})}var en=()=>{let[e,n]=(0,a.useState)(0),[i,I]=(0,a.useState)(""),[W,P]=(0,a.useState)(""),[K,M]=(0,a.useState)(""),[z,V]=(0,a.useState)(!1),[B,N]=(0,a.useState)("add"),[E,R]=(0,a.useState)(null),[A,H]=(0,a.useState)(!1),[X,G]=(0,a.useState)(""),[O,F]=(0,a.useState)(null),J=e=>{e.id&&F(e.id===O?null:e.id)},[Q,en]=(0,a.useState)({open:!1,message:"",severity:"info"}),ei=[{id:1,ten:"Đặc biệt"},{id:2,ten:"Cấp I"},{id:3,ten:"Cấp II"},{id:4,ten:"Cấp III"},{id:5,ten:"Cấp IV"},{id:6,ten:"Cấp V"}],[et,ea]=(0,a.useState)([]),[el,er]=(0,a.useState)(!1),ed=(e,n)=>{en({open:!0,message:e,severity:n})},eo=()=>{en(e=>({...e,open:!1}))},ec=e=>{M(e.target.value)},eh=async()=>{er(!0);try{let e={pageNumber:1,pageSize:50};i&&(e.tenDoan=i),e.maLoaiCongTrinh=["DE_BIEN"],K&&(e.capDe=K);let n=await _.I.getAllDoanDe(e,!1);console.log("Dữ liệu đoạn đ\xea nhận được từ API:",n),ea(n.items||[]),F(null)}catch(e){console.error("Lỗi khi lấy dữ liệu đoạn đ\xea:",e),ed("Kh\xf4ng thể lấy dữ liệu đoạn đ\xea","error")}finally{er(!1)}};(0,a.useEffect)(()=>{eh()},[]);let es=()=>{V(!1)},eu=async n=>{try{await _.I.saveDoanDe(n)?(ed("".concat("add"===B?"Th\xeam":"Cập nhật"," đoạn đ\xea th\xe0nh c\xf4ng"),"success"),V(!1),0===e&&eh()):ed("".concat("add"===B?"Th\xeam":"Cập nhật"," đoạn đ\xea thất bại"),"error")}catch(e){console.error("Lỗi khi lưu đoạn đ\xea:",e),ed("Đ\xe3 xảy ra lỗi: ".concat(e instanceof Error?e.message:"Kh\xf4ng x\xe1c định"),"error")}},em=async()=>{if(X)try{await _.I.deleteDoanDe(X)?(ed("X\xf3a đoạn đ\xea th\xe0nh c\xf4ng","success"),eh()):ed("X\xf3a đoạn đ\xea thất bại","error")}catch(e){console.error("Lỗi khi x\xf3a đoạn đ\xea:",e),ed("Đ\xe3 xảy ra lỗi: ".concat(e instanceof Error?e.message:"Kh\xf4ng x\xe1c định"),"error")}finally{H(!1)}};return(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(l.Z,{sx:{borderBottom:1,borderColor:"divider",mb:1},children:(0,t.jsxs)(r.Z,{value:e,onChange:(e,i)=>{n(i),0===i&&eh()},children:[(0,t.jsx)(d.Z,{label:"Bản đồ v\xe0 bảng thống k\xea"}),(0,t.jsx)(d.Z,{label:"Quản l\xfd đoạn đ\xea"})]})}),(0,t.jsxs)(ee,{value:e,index:0,children:[(0,t.jsx)(o.Z,{sx:{p:2,mb:3,height:"45vh"},children:(0,t.jsx)(c.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",style:{height:"100%"},children:(0,t.jsx)(c.ZP,{item:!0,xs:12,style:{height:"100%",position:"relative"},children:(0,t.jsx)($,{doanDeList:et,loading:el,selectedId:O||null,onSelectFeature:e=>F(e)})})})}),(0,t.jsx)(o.Z,{sx:{p:2,mb:2},children:(0,t.jsxs)(c.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,t.jsx)(c.ZP,{item:!0,xs:12,md:2,children:(0,t.jsx)(h.Z,{size:"small",fullWidth:!0,label:"T\xecm kiếm tuyến đ\xea",variant:"outlined",value:i,onChange:e=>{I(e.target.value)},InputProps:{startAdornment:(0,t.jsx)(s.Z,{position:"start",children:(0,t.jsx)(S.Z,{})})}})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:2,children:(0,t.jsxs)(u.Z,{fullWidth:!0,children:[(0,t.jsx)(m.Z,{id:"loai-de-label",children:"Loại đ\xea"}),(0,t.jsxs)(g.Z,{size:"small",labelId:"loai-de-label",value:W,label:"Loại đ\xea",onChange:e=>{P(e.target.value)},children:[(0,t.jsx)(v.Z,{value:"",children:(0,t.jsx)("em",{children:"Tất cả"})}),[{id:1,ten:"Đ\xea s\xf4ng"},{id:2,ten:"Đ\xea biển"},{id:3,ten:"Đ\xea bao"}].map(e=>(0,t.jsx)(v.Z,{value:e.ten,children:e.ten},e.id))]})]})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:2,children:(0,t.jsxs)(u.Z,{fullWidth:!0,children:[(0,t.jsx)(m.Z,{id:"cap-de-label",children:"Cấp đ\xea"}),(0,t.jsxs)(g.Z,{size:"small",labelId:"cap-de-label",value:K,label:"Cấp đ\xea",onChange:ec,children:[(0,t.jsx)(v.Z,{value:"",children:(0,t.jsx)("em",{children:"Tất cả"})}),ei.map(e=>(0,t.jsx)(v.Z,{value:e.ten,children:e.ten},e.id))]})]})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:2,children:(0,t.jsxs)(u.Z,{fullWidth:!0,children:[(0,t.jsx)(m.Z,{id:"cap-de-label",children:"Cao tr\xecnh đ\xea"}),(0,t.jsxs)(g.Z,{size:"small",labelId:"cap-de-label",value:K,label:"Cao tr\xecnh đ\xea",onChange:ec,children:[(0,t.jsx)(v.Z,{value:"",children:(0,t.jsx)("em",{children:" nhỏ hơn 4m "})}),(0,t.jsx)(v.Z,{value:"",children:(0,t.jsx)("em",{children:" 4m - 5m "})}),(0,t.jsx)(v.Z,{value:"",children:(0,t.jsx)("em",{children:" 5m - 6m "})}),(0,t.jsx)(v.Z,{value:"",children:(0,t.jsx)("em",{children:" 6m - 7m "})}),(0,t.jsx)(v.Z,{value:"",children:(0,t.jsx)("em",{children:" 7m - 8m "})}),(0,t.jsx)(v.Z,{value:"",children:(0,t.jsx)("em",{children:" lớn hơn 8m "})}),ei.map(e=>(0,t.jsx)(v.Z,{value:e.ten},e.id))]})]})}),(0,t.jsx)(c.ZP,{item:!0,xs:6,md:1,children:(0,t.jsx)(x.Z,{variant:"contained",fullWidth:!0,onClick:()=>{eh()},startIcon:(0,t.jsx)(k.Z,{}),children:"Lọc"})}),(0,t.jsx)(c.ZP,{item:!0,xs:6,md:1,children:(0,t.jsx)(x.Z,{variant:"outlined",fullWidth:!0,onClick:()=>{I(""),P(""),M(""),setTimeout(eh,0)},startIcon:(0,t.jsx)(w.Z,{}),children:"X\xf3a"})})]})}),(0,t.jsx)(o.Z,{sx:{p:2},children:el?(0,t.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,t.jsx)(p.Z,{children:"Đang tải dữ liệu..."})}):0===et.length?(0,t.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,t.jsx)(p.Z,{children:"Kh\xf4ng c\xf3 dữ liệu để hiển thị"})}):(0,t.jsx)(f.Z,{selectedRowId:O,actions:e=>(0,t.jsx)(l.Z,{sx:{display:"flex",gap:1},children:(0,t.jsxs)(x.Z,{size:"small",variant:O===e.id?"contained":"outlined",color:"primary",onClick:n=>{n.stopPropagation(),J(e)},children:[(0,t.jsx)("i",{className:"fas fa-map-marker-alt",style:{fontSize:"14px",marginRight:"4px"}}),O===e.id?"Đang xem":"Xem tr\xean bản đồ"]})}),columns:Y.CS,rows:et.map((e,n)=>{var i;return{...e,STT:n+1,ketCau:(null===(i=e.matCat)||void 0===i?void 0:i.danhGia)||"",ketCau2:"",matTrach:""}})})})]}),(0,t.jsxs)(ee,{value:e,index:1,children:[(0,t.jsxs)(l.Z,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)(p.Z,{variant:"h6",component:"h2",children:"Quản l\xfd đoạn đ\xea"}),(0,t.jsx)(x.Z,{variant:"contained",startIcon:(0,t.jsx)(L.Z,{}),onClick:()=>{R(null),N("add"),V(!0)},children:"Th\xeam mới đoạn đ\xea"})]}),(0,t.jsx)(q,{onEdit:e=>{R(e),N("edit"),V(!0)},onDelete:e=>{G(e),H(!0)}})]}),z&&(0,t.jsxs)(j.Z,{open:z,onClose:es,maxWidth:"md",fullWidth:!0,children:[(0,t.jsx)(D.Z,{children:"add"===B?"Th\xeam mới đoạn đ\xea":"Cập nhật th\xf4ng tin đoạn đ\xea"}),(0,t.jsx)(b.Z,{children:(0,t.jsx)(U,{data:E,onSave:eu,onCancel:es})})]}),(0,t.jsxs)(j.Z,{open:A,onClose:()=>H(!1),children:[(0,t.jsx)(D.Z,{children:"X\xe1c nhận x\xf3a"}),(0,t.jsx)(b.Z,{children:(0,t.jsx)(y.Z,{children:"Bạn c\xf3 chắc chắn muốn x\xf3a đoạn đ\xea n\xe0y? H\xe0nh động n\xe0y kh\xf4ng thể ho\xe0n t\xe1c."})}),(0,t.jsxs)(Z.Z,{children:[(0,t.jsx)(x.Z,{onClick:()=>H(!1),children:"Hủy"}),(0,t.jsx)(x.Z,{onClick:em,color:"error",variant:"contained",children:"X\xf3a"})]})]}),(0,t.jsx)(T.Z,{open:Q.open,autoHideDuration:5e3,onClose:eo,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,t.jsx)(C.Z,{onClose:eo,severity:Q.severity,sx:{width:"100%"},children:Q.message})})]})}},18708:function(e,n,i){i.d(n,{I:function(){return l}});var t=i(64577);class a{async getAllTuyenDe(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{return await (0,t.getData)("de-dieu-pctt/tuyen-de",e,void 0,n)||{items:[],totalItems:0,pageNumber:1,pageSize:10}}catch(e){return console.error("Lỗi khi lấy danh s\xe1ch tuyến đ\xea:",e),{items:[],totalItems:0,pageNumber:1,pageSize:10}}}async getTuyenDeById(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return null;try{return await (0,t.getData)("de-dieu-pctt/tuyen-de/".concat(e),null,void 0,n)}catch(n){return console.error("Lỗi khi lấy tuyến đ\xea ID = ".concat(e,":"),n),null}}async saveTuyenDe(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{let i=await (0,t.saveData)("de-dieu-pctt/tuyen-de",e,"Lưu tuyến đ\xea th\xe0nh c\xf4ng",n);return!!i&&!i.error}catch(e){return console.error("Lỗi khi lưu tuyến đ\xea:",e),!1}}async deleteTuyenDe(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return!1;try{let i=await (0,t.deleteData)("de-dieu-pctt/tuyen-de/".concat(e),"X\xf3a tuyến đ\xea th\xe0nh c\xf4ng",n);return!!i&&!i.error}catch(n){return console.error("Lỗi khi x\xf3a tuyến đ\xea ID = ".concat(e,":"),n),!1}}async getAllDoanDe(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{return await (0,t.getData)("de-dieu-pctt/doan-de",e,void 0,n)||{items:[],totalItems:0,pageNumber:1,pageSize:10}}catch(e){return console.error("Lỗi lấy danh s\xe1ch đoạn đ\xea:",e),{items:[],totalItems:0,pageNumber:1,pageSize:10}}}async saveDoanDe(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{if(""===e.id&&(e.id=void 0),!e.tenDoan||!e.capDeId)throw Error("Thiếu th\xf4ng tin bắt buộc. Vui l\xf2ng kiểm tra lại.");let i={...e};if("string"==typeof i.toaDo)try{i.toaDo=JSON.parse(i.toaDo)}catch(e){throw console.error("Lỗi khi parse dữ liệu tọa độ:",e),Error("Dữ liệu tọa độ kh\xf4ng hợp lệ. Vui l\xf2ng kiểm tra định dạng GeoJSON.")}let a=await (0,t.saveData)("de-dieu-pctt/doan-de",i,"Lưu đoạn đ\xea th\xe0nh c\xf4ng",n);return!!a&&!a.error}catch(e){return console.error("Lỗi khi lưu đoạn đ\xea:",e),!1}}async getDoanDeById(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return null;try{return await (0,t.getData)("de-dieu-pctt/doan-de/".concat(e),null,void 0,n)}catch(n){return console.error("Lỗi khi lấy đoạn đ\xea ID = ".concat(e,":"),n),null}}async deleteDoanDe(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return!1;try{let i=await (0,t.deleteData)("de-dieu-pctt/doan-de/".concat(e),"X\xf3a đoạn đ\xea th\xe0nh c\xf4ng",n);return!!i&&!i.error}catch(n){return console.error("Lỗi khi x\xf3a đoạn đ\xea ID = ".concat(e,":"),n),!1}}async getAllCapDe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{return await (0,t.getData)("de-dieu-pctt/cap-de",{pageNumber:e,pageSize:n},void 0,i)||{items:[],totalItems:0,pageNumber:e,pageSize:n}}catch(i){return console.error("Lỗi khi lấy danh s\xe1ch cấp đ\xea:",i),{items:[],totalItems:0,pageNumber:e,pageSize:n}}}async getCapDeById(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return null;try{return await (0,t.getData)("de-dieu-pctt/cap-de/".concat(e),null,void 0,n)}catch(n){return console.error("Lỗi khi lấy cấp đ\xea ID = ".concat(e,":"),n),null}}async saveCapDe(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{let i=await (0,t.saveData)("de-dieu-pctt/cap-de",e,"Lưu cấp đ\xea th\xe0nh c\xf4ng",n);return!!i&&!i.error}catch(e){return console.error("Lỗi khi lưu cấp đ\xea:",e),!1}}async deleteCapDe(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return!1;try{let i=await (0,t.deleteData)("de-dieu-pctt/cap-de/".concat(e),"X\xf3a cấp đ\xea th\xe0nh c\xf4ng",n);return!!i&&!i.error}catch(n){return console.error("Lỗi khi x\xf3a cấp đ\xea ID = ".concat(e,":"),n),!1}}async getAllLoaiCongTrinh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{return await (0,t.getData)("de-dieu-pctt/loai-cong-trinh",{pageNumber:e,pageSize:n},void 0,i)||{items:[],totalItems:0,pageNumber:e,pageSize:n}}catch(i){return console.error("Lỗi khi lấy danh s\xe1ch loại c\xf4ng tr\xecnh:",i),{items:[],totalItems:0,pageNumber:e,pageSize:n}}}async getLoaiCongTrinhTree(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{return await (0,t.getData)("de-dieu-pctt/loai-cong-trinh/tree",null,void 0,e)||[]}catch(e){return console.error("Lỗi khi lấy cấu tr\xfac c\xe2y loại c\xf4ng tr\xecnh:",e),[]}}async getLoaiCongTrinhById(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return null;try{return await (0,t.getData)("de-dieu-pctt/loai-cong-trinh/".concat(e),null,void 0,n)}catch(n){return console.error("Lỗi khi lấy loại c\xf4ng tr\xecnh ID = ".concat(e,":"),n),null}}async saveLoaiCongTrinh(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{let i=await (0,t.saveData)("de-dieu-pctt/loai-cong-trinh",e,"Lưu loại c\xf4ng tr\xecnh th\xe0nh c\xf4ng",n);return!!i&&!i.error}catch(e){return console.error("Lỗi khi lưu loại c\xf4ng tr\xecnh:",e),!1}}async deleteLoaiCongTrinh(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return!1;try{let i=await (0,t.deleteData)("de-dieu-pctt/loai-cong-trinh/".concat(e),"X\xf3a loại c\xf4ng tr\xecnh th\xe0nh c\xf4ng",n);return!!i&&!i.error}catch(n){return console.error("Lỗi khi x\xf3a loại c\xf4ng tr\xecnh ID = ".concat(e,":"),n),!1}}async getAllLoaiTuyenDe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return this.getAllLoaiCongTrinh(e,n,i)}async getLoaiTuyenDeById(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return this.getLoaiCongTrinhById(e,n)}async saveLoaiTuyenDe(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return this.saveLoaiCongTrinh(e,n)}async deleteLoaiTuyenDe(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return this.deleteLoaiCongTrinh(e,n)}}let l=new a}}]);