"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5077],{85077:function(e,l,i){i.r(l),i.d(l,{default:function(){return G}});var n=i(85893),a=i(67294),t=i(60990),s=i(21038),d=i(52857),r=i(93454),c=i(96788),h=i(26624),o=i(28907),x=i(68573),u=i(40492),m=i(95611),j=i(6897),Z=i(94143),b=i(29346),g=i(15972),C=i(51015),v=i(39892),p=i(35299),f=i(62987),k=i(4145),W=i(29291),T=i(69200),I=i(42638),S=i(17071),K=i(53839),P=i(66417),y=i(83857),L=i(60553),z=i(72744),w=i(88196),_=i(92365),D=i(40110),A=i(96727);let N=[{id:"stt",label:"STT",minWidth:60,align:"left"},{id:"tenKe",label:"T\xean k\xe8",minWidth:150,align:"left"},{id:"tenTuyenDe",label:"Tuyến đ\xea",minWidth:150,align:"left"},{id:"tenDoanDe",label:"Đoạn đ\xea",minWidth:150,align:"left"},{label:"Vị tr\xed",children:[{id:"viTri",label:"Km (từ)",align:"center",minWidth:100},{id:"viTriDen",label:"Km (đến)",align:"center",minWidth:100}],id:""},{id:"diaDiem",label:"Địa điểm",minWidth:170,align:"left"},{id:"chieuDai",label:"Chiều d\xe0i (m)",minWidth:100,align:"left",format:e=>e||"-"},{label:"Cao tr\xecnh (m)",children:[{id:"caoTrinhDauKe",label:"Đầu k\xe8",align:"center",minWidth:100},{id:"caoTrinhCuoiKe",label:"Cuối k\xe8",align:"center",minWidth:100}],id:""},{id:"vatLieu",label:"Vật liệu",minWidth:120,align:"left"},{id:"hienTrang",label:"Hiện trạng",minWidth:150,align:"left"},{id:"danhGia",label:"Đ\xe1nh gi\xe1",minWidth:200,align:"left"},{id:"ghiChu",label:"Ghi ch\xfa",minWidth:200,align:"left"},{id:"actions",label:"Thao t\xe1c",minWidth:100,align:"center",pinned:"right"}],X=[...N],E=[...N];[...N];let H=[{label:"K\xe8 mỏ h\xe0n",value:"mohan",maLoai:"KE_MO_HAN",columns:X},{label:"K\xe8 l\xe1t m\xe1i",value:"latmai",maLoai:"KE_LAT_MAI",columns:E}],V=()=>{let[e,l]=(0,a.useState)(0),[i,N]=(0,a.useState)(0),[X,E]=(0,a.useState)(""),[V,G]=(0,a.useState)(""),[M,R]=(0,a.useState)(""),B=[{id:1,ten:"Đặc biệt"},{id:2,ten:"Cấp I"},{id:3,ten:"Cấp II"},{id:4,ten:"Cấp III"},{id:5,ten:"Cấp IV"},{id:6,ten:"Cấp V"}],F=e=>{R(e.target.value)},{keList:O,handleKeClick:Y,setFocusedId:q,handleDataChange:J}=(0,W.Y)(),[Q,U]=(0,a.useState)(!1),[$,ee]=(0,a.useState)(null),[el,ei]=(0,a.useState)(null),[en,ea]=(0,a.useState)(!1),[et]=(0,a.useState)(!1),[es,ed]=(0,a.useState)(null),er=(0,a.useCallback)(e=>{if(!(null==e?void 0:e.id))return;let l=e.id===es?null:e.id;ed(l),q(l)},[es,q]),ec=e=>(0,n.jsxs)(t.Z,{sx:{display:"flex",gap:1},children:[(0,n.jsx)(s.Z,{title:"Xem tr\xean bản đồ",children:(0,n.jsx)(d.Z,{size:"small",color:es===e.id?"success":"default",onClick:()=>er(e),children:(0,n.jsx)(P.Z,{fontSize:"small"})})}),(0,n.jsx)(s.Z,{title:"Chỉnh sửa",children:(0,n.jsx)(d.Z,{size:"small",color:"primary",onClick:()=>{ee(e),U(!0)},children:(0,n.jsx)(S.Z,{fontSize:"small"})})}),(0,n.jsx)(s.Z,{title:"X\xf3a",children:(0,n.jsx)(d.Z,{size:"small",color:"error",onClick:()=>ei(e),children:(0,n.jsx)(y.Z,{fontSize:"small"})})})]}),eh=async()=>{(null==el?void 0:el.id)&&(ea(!0),await z.M.deleteKe(el.id),ea(!1),ei(null),J&&J())},eo=O.filter(l=>{var i,n;let a=H[e].label.toLowerCase();return(null===(i=l.loaiCongTrinh)||void 0===i?void 0:i.toLowerCase().includes(a))||(null===(n=l.loaiCongTrinh)||void 0===n?void 0:n.toLowerCase().includes(a))});return(0,n.jsxs)(t.Z,{children:[(0,n.jsx)(r.Z,{sx:{p:2,mb:3},children:(0,n.jsx)(c.Z,{variant:"h5",children:"HIỆN TRẠNG K\xc8 TRƯỚC LŨ"})}),(0,n.jsx)(r.Z,{sx:{mb:2},children:(0,n.jsx)(h.Z,{value:e,onChange:(e,i)=>{l(i),N(0)},variant:"scrollable",scrollButtons:"auto",children:H.map(e=>(0,n.jsx)(o.Z,{label:e.label},e.value))})}),(0,n.jsx)(r.Z,{sx:{p:2,mb:3,height:"45vh"},children:(0,n.jsx)(x.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",style:{height:"100%"},children:(0,n.jsx)(x.ZP,{item:!0,xs:12,style:{height:"100%",position:"relative"},children:(0,n.jsx)(T.default,{boundaryFile:"",children:(0,n.jsx)(I.Z,{data:O,onKeClick:Y})})})})}),(0,n.jsx)(r.Z,{sx:{p:2,mb:2},children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,md:2,children:(0,n.jsx)(u.Z,{size:"small",fullWidth:!0,label:"T\xecm kiếm tuyến đ\xea",variant:"outlined",value:X,onChange:e=>{E(e.target.value)},InputProps:{startAdornment:(0,n.jsx)(m.Z,{position:"start",children:(0,n.jsx)(p.Z,{})})}})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:2,children:(0,n.jsxs)(j.Z,{fullWidth:!0,children:[(0,n.jsx)(Z.Z,{id:"loai-de-label",children:"Loại k\xe8"}),(0,n.jsxs)(b.Z,{size:"small",labelId:"loai-ke-label",value:V,label:"Loại k\xe8",onChange:e=>{G(e.target.value)},children:[(0,n.jsx)(g.Z,{value:"",children:(0,n.jsx)("em",{children:"Tất cả"})}),[{id:1,ten:"Đ\xea s\xf4ng"},{id:2,ten:"Đ\xea biển"},{id:3,ten:"Đ\xea bao"}].map(e=>(0,n.jsx)(g.Z,{value:e.ten,children:e.ten},e.id))]})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:2,children:(0,n.jsxs)(j.Z,{fullWidth:!0,children:[(0,n.jsx)(Z.Z,{id:"cap-de-label",children:"Kết cấu"}),(0,n.jsxs)(b.Z,{size:"small",labelId:"cap-de-label",value:M,label:"Cấp đ\xea",onChange:F,children:[(0,n.jsx)(g.Z,{value:"",children:(0,n.jsx)("em",{children:"Tất cả"})}),B.map(e=>(0,n.jsx)(g.Z,{value:e.ten,children:e.ten},e.id))]})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:2,children:(0,n.jsxs)(j.Z,{fullWidth:!0,children:[(0,n.jsx)(Z.Z,{id:"cap-de-label",children:"Địa danh x\xe3 "}),(0,n.jsxs)(b.Z,{size:"small",labelId:"cap-de-label",value:M,label:"Cao tr\xecnh đ\xea",onChange:F,children:[(0,n.jsx)(g.Z,{value:"",children:(0,n.jsx)("em",{children:" x\xe3 "})}),B.map(e=>(0,n.jsx)(g.Z,{value:e.ten},e.id))]})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,md:1,children:(0,n.jsx)(C.Z,{variant:"contained",fullWidth:!0,startIcon:(0,n.jsx)(f.Z,{}),children:"Lọc"})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,md:1,children:(0,n.jsx)(C.Z,{variant:"outlined",fullWidth:!0,onClick:()=>{E(""),G(""),R("")},startIcon:(0,n.jsx)(k.Z,{}),children:"X\xf3a"})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:1,children:(0,n.jsx)(C.Z,{variant:"outlined",fullWidth:!0,onClick:()=>U(!0),startIcon:(0,n.jsx)(K.Z,{}),children:"Th\xeam mới"})})]})}),(0,n.jsx)(r.Z,{sx:{p:2},children:(0,n.jsx)(v.Z,{columns:H[e].columns,rows:eo,loading:et,pagination:!0,totalItems:eo.length,page:i,onPageChange:e=>N(e),actions:e=>ec(e),selectedRowId:es})}),(0,n.jsx)(L.Z,{open:Q,onClose:()=>{U(!1),ee(null)},onSaveComplete:()=>{U(!1),ee(null),J&&J()},editKe:$}),(0,n.jsxs)(w.Z,{open:!!el,onClose:()=>ei(null),children:[(0,n.jsx)(_.Z,{children:"X\xe1c nhận x\xf3a k\xe8"}),(0,n.jsxs)(D.Z,{children:["Bạn c\xf3 chắc chắn muốn x\xf3a k\xe8 ",(0,n.jsx)("b",{children:null==el?void 0:el.tenKe}),"?"]}),(0,n.jsxs)(A.Z,{children:[(0,n.jsx)(C.Z,{onClick:()=>ei(null),disabled:en,children:"Hủy"}),(0,n.jsx)(C.Z,{onClick:eh,color:"error",disabled:en,children:en?"Đang x\xf3a...":"X\xf3a"})]})]}),(0,n.jsx)(t.Z,{sx:{mb:2,textAlign:"right"},children:(0,n.jsx)(C.Z,{variant:"contained",onClick:()=>{ee(null),U(!0)},children:"Th\xeam mới k\xe8"})})]})};var G=()=>(0,n.jsx)(W.x,{children:(0,n.jsx)(V,{})})}}]);