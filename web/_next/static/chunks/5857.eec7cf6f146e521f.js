"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5857],{77584:function(e,n){n.Z=e=>{if(!e)return 0;switch(e){case"nuoc-mat":return 1;case"nuoc-duoi-dat":return 2;case"ktsd-nuoc-duoi-dat":return 7;case"td-nuoc-duoi-dat":return 8;case"hnk-nuoc-duoi-dat":return 9;case"xa-thai":return 3;default:return 0}}},35376:function(e,n,t){var i=t(85893),a=t(60990),r=t(97182);n.Z=()=>(0,i.jsxs)(a.Z,{sx:{py:5,display:"flex",flexWrap:"wrap",justifyContent:"center",alignContent:"center"},children:[(0,i.jsx)(r.Z,{size:20})," ",(0,i.jsx)(a.Z,{textAlign:"center",width:"100%",children:"Đang tải dữ liệu..."})]})},95906:function(e,n,t){var i=t(11163),a=t(67294),r=t(77584);n.Z=()=>{let{query:e}=(0,i.useRouter)();return{consFilter:(0,a.useMemo)(()=>({page:e.page,type:e.type,tenct:"",loai_ct:(0,r.Z)(null==e?void 0:e.type),huyen:Number(e.huyen)||0,xa:Number(e.xa)||0,song:Number(e.song)||0,luuvuc:Number(e.luuvuc)||0,tieu_luuvuc:Number(e.tieu_luuvuc)||0,tang_chuanuoc:Number(e.tang_chuanuoc)||0,nguonnuoc_kt:""}),[e]),licFilter:(0,a.useMemo)(()=>({page:"string"==typeof e.page?e.page:Array.isArray(e.page)?e.page[0]:void 0,type:"string"==typeof e.type?e.type:Array.isArray(e.type)?e.type[0]:void 0,so_gp:"string"==typeof e.so_gp?e.so_gp:Array.isArray(e.so_gp)?e.so_gp[0]:void 0,cong_trinh:"string"==typeof e.cong_trinh?e.cong_trinh:Array.isArray(e.cong_trinh)?e.cong_trinh[0]:void 0,coquan_cp:"string"==typeof e.coquan_cp?e.coquan_cp:Array.isArray(e.coquan_cp)?e.coquan_cp[0]:void 0,loaihinh_cp:Number(e.loaihinh_cp)||0,hieuluc_gp:"string"==typeof e.hieuluc_gp?e.hieuluc_gp:Array.isArray(e.hieuluc_gp)?e.hieuluc_gp[0]:void 0,loai_ct:Number(e.loai_ct)||(0,r.Z)("string"==typeof e.type?e.type:Array.isArray(e.type)?e.type[0]:""),tang_chuanuoc:Number(e.tang_chuanuoc)||0,huyen:Number(e.huyen)||0,xa:Number(e.xa)||0,tieuvung_qh:Number(e.tieuvung_qh)||0,tochuc_canhan:Number(e.tochuc_canhan)||0,tu_nam:Number(e.tu_nam)||new Date().getFullYear()-5,den_nam:Number(e.den_nam)||new Date().getFullYear()}),[e])}}},5531:function(e,n,t){t.d(n,{B:function(){return i}});let i=(e,n)=>{switch(e){case 1:return{consType:[{id:"nuocmat",label:"NƯỚC MẶT",children:[{label:"Thủy điện",id:"thuydien"},{label:"Hồ chứa",id:"hochua"},{label:"Trạm bơm",id:"trambom"},{label:"Trạm cấp nước",id:"tramcapnuoc"},{label:"Cống lấy nước",id:"cong"},{label:"Nh\xe0 m\xe1y nước",id:"nhamaynuoc"}]}],initialItems:["nuocmat","thuydien","hochua","trambom","tramcapnuoc","cong","nhamaynuoc"]};case 2:return{consType:[{id:"nuocduoidat",label:"NƯỚC DƯỚI ĐẤT",children:[{label:"Khai th\xe1c giếng đ\xe0o",id:"giengdao"},{label:"Khai th\xe1c giếng khoan",id:"giengkhoan"},{label:"Thăm d\xf2",id:"thamdo"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_ndd"}]}],initialItems:["nuocduoidat","giengdao","giengkhoan","thamdo","congtrinhkhac_ndd"]};case 3:return{consType:[{id:"xathai",label:"XẢ THẢI",children:[{label:"Khu / Cụm CN",id:"khu_cumcn_taptrung"},{label:"SX tiểu thủ CN",id:"sx_tieuthu_cn"},{label:"SX KD dịch vụ",id:"sx_kd_dichvu"},{label:"CS bệnh viện",id:"cs_benhvien"},{label:"Khu d\xe2n cư / L\xe0ng nghề",id:"khudancu_langnghe"},{label:"Chăn nu\xf4i / NTTS",id:"channuoi_ntts"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_xt"}]}],initialItems:["xathai","khu_cumcn_taptrung","sx_tieuthu_cn","sx_kd_dichvu","cs_benhvien","khudancu_langnghe","channuoi_ntts","congtrinhkhac_xt"]};default:if(n)switch(n){case"nuoc-mat":return{consType:[],initialItems:["nuocmat","thuydien","hochua","trambom","tramcapnuoc","conglaynuoc","nhamaynuoc"]};case"ktsd-nuoc-duoi-dat":return{consType:[],initialItems:["giengkhoan","giengdao"]};case"td-nuoc-duoi-dat":return{consType:[],initialItems:["thamdo"]};case"hnk-nuoc-duoi-dat":return{consType:[],initialItems:["hanhnghekhoan"]}}return{consType:[{id:"nuocmat",label:"NƯỚC MẶT",children:[{label:"Thủy điện",id:"thuydien"},{label:"Hồ chứa",id:"hochua"},{label:"Trạm bơm",id:"trambom"},{label:"Trạm cấp nước",id:"tramcapnuoc"},{label:"Cống lấy nước",id:"cong"},{label:"Nh\xe0 m\xe1y nước",id:"nhamaynuoc"}]},{id:"nuocduoidat",label:"NƯỚC DƯỚI ĐẤT",children:[{label:"Khai th\xe1c giếng đ\xe0o",id:"giengdao"},{label:"Khai th\xe1c giếng khoan",id:"giengkhoan"},{label:"Thăm d\xf2",id:"thamdo"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_ndd"}]},{id:"xathai",label:"XẢ THẢI",children:[{label:"Khu / Cụm CN",id:"khu_cumcn_taptrung"},{label:"SX tiểu thủ CN",id:"sx_tieuthu_cn"},{label:"SX KD dịch vụ",id:"sx_kd_dichvu"},{label:"CS bệnh viện",id:"cs_benhvien"},{label:"Khu d\xe2n cư / L\xe0ng nghề",id:"khudancu_langnghe"},{label:"Chăn nu\xf4i / NTTS",id:"channuoi_ntts"},{label:"C\xf4ng tr\xecnh kh\xe1c",id:"congtrinhkhac_xt"}]}],initialItems:["nuocmat","thuydien","hochua","trambom","tramcapnuoc","cong","nhamaynuoc","nuocduoidat","giengdao","giengkhoan","thamdo","congtrinhkhac_ndd","xathai","khu_cumcn_taptrung","sx_tieuthu_cn","sx_kd_dichvu","cs_benhvien","khudancu_langnghe","channuoi_ntts","congtrinhkhac_xt"]}}}},72246:function(e,n,t){var i=t(85893);t(67294);var a=t(12166),r=t(65806),c=t(56894),l=t(47407),s=t(60990),o=t(96788),u=t(5531);n.Z=e=>{let{consType:n=0,selectedItems:t,onTypeChange:d,showLabel:h,setShowLabel:g}=e,x=(0,u.B)(n).consType,m=e=>{let n=[],t=e=>{var i;null===(i=e.children)||void 0===i||i.forEach(e=>{n.push(e.id),t(e)})},i=x.find(n=>n.id===e);return i&&t(i),n},b=e=>{let n;if(t.includes(e)){let i=m(e);n=t.filter(n=>n!==e&&!i.includes(n))}else{let i=m(e);n=[...t,e,...i.filter(e=>!t.includes(e))]}d(n)},p=e=>(0,i.jsx)(l.Z,{sx:{p:0},children:e.map(e=>{var n,c;return(0,i.jsxs)(s.Z,{sx:{ml:(null===(n=e.children)||void 0===n?void 0:n.length)?0:4},children:[(0,i.jsx)(r.Z,{control:(0,i.jsx)(a.Z,{checked:t.includes(e.id),indeterminate:!!(null===(c=e.children)||void 0===c?void 0:c.length)&&e.children.some(e=>t.includes(e.id))&&!t.includes(e.id),onChange:()=>b(e.id)}),label:(0,i.jsxs)(o.Z,{variant:"overline",sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:[!e.children&&(0,i.jsx)("img",{src:"/images/icon/".concat(e.id,".png"),alt:"icon",width:20}),(0,i.jsxs)("span",{children:["\xa0",e.label]})]})}),e.children&&p(e.children)]},e.id)})});return(0,i.jsxs)(s.Z,{px:4,children:[(0,i.jsx)(c.Z,{children:(0,i.jsx)(r.Z,{control:(0,i.jsx)(a.Z,{checked:h,onChange:()=>g(!h)}),label:"Hiển thị t\xean c\xf4ng tr\xecnh"})}),p(x)]})}},15857:function(e,n,t){t.r(n),t.d(n,{default:function(){return q}});var i=t(85893),a=t(67294),r=t(68573),c=t(77527),l=t(60990),s=t(96788),o=t(14959),u=t(45214),d=t(93454);let h=(0,c.ZP)(o.Z)(e=>{let{theme:n}=e;return{height:10,borderRadius:5,["&.".concat(u.Z.colorPrimary)]:{backgroundColor:n.palette.grey["light"===n.palette.mode?200:800]},["& .".concat(u.Z.bar)]:{borderRadius:5,backgroundColor:"".concat(n.palette.success.main)}}}),g=(0,c.ZP)(o.Z)(e=>{let{theme:n}=e;return{height:10,borderRadius:5,["&.".concat(u.Z.colorPrimary)]:{backgroundColor:n.palette.grey["light"===n.palette.mode?200:800]},["& .".concat(u.Z.bar)]:{borderRadius:5,backgroundColor:"".concat(n.palette.warning.main)}}}),x=(0,c.ZP)(o.Z)(e=>{let{theme:n}=e;return{height:10,borderRadius:5,["&.".concat(u.Z.colorPrimary)]:{backgroundColor:n.palette.grey["light"===n.palette.mode?200:800]},["& .".concat(u.Z.bar)]:{borderRadius:5,backgroundColor:"".concat(n.palette.error.main)}}});var m=()=>{let[e,n]=(0,a.useState)(0),[t,r]=(0,a.useState)(0),[c,o]=(0,a.useState)(0),[u]=(0,a.useState)(361),m=u-15,b=(0,a.useRef)(!0);return(0,a.useEffect)(()=>(b.current=!0,()=>{b.current=!1}),[]),(0,a.useEffect)(()=>{n(15/u*100),r(m/u*100),o(7/u*100)},[7,m,15,u]),(0,i.jsxs)(d.Z,{elevation:3,children:[(0,i.jsx)(d.Z,{elevation:3,sx:{py:.5,mb:2,BorderRadius:0,textAlign:"center"},children:(0,i.jsx)(s.Z,{variant:"overline",sx:{fontWeight:"bold"},children:"TRẠNG TH\xc1I C\xd4NG TR\xccNH"})}),(0,i.jsxs)(l.Z,{px:5,pb:5,children:[(0,i.jsxs)(s.Z,{children:["Tổng số: ",u," "]}),(0,i.jsxs)(l.Z,{sx:{paddingTop:3},children:[(0,i.jsxs)(s.Z,{children:["Trạm kết nối b\xecnh thường: ",15," "]}),(0,i.jsx)(h,{variant:"determinate",value:e})]}),(0,i.jsxs)(l.Z,{sx:{paddingTop:3},children:[(0,i.jsxs)(s.Z,{children:["Trạm mất kết nối: ",m," "]}),(0,i.jsx)(g,{variant:"determinate",value:t})]}),(0,i.jsxs)(l.Z,{sx:{paddingTop:3},children:[(0,i.jsxs)(s.Z,{children:["Trạm vận h\xe0nh chưa đ\xfang: ",7," "]}),(0,i.jsx)(x,{variant:"determinate",value:c})]})]})]})},b=()=>{let[e,n]=(0,a.useState)(new Date),[t,r]=(0,a.useState)("");return(0,a.useEffect)(()=>{let t=setInterval(()=>{r(e.toLocaleString()),n(new Date)},1e3);return()=>clearInterval(t)},[e]),(0,i.jsx)(d.Z,{sx:{py:2,px:3},children:(0,i.jsxs)(s.Z,{variant:"body2",fontWeight:700,children:["THỐNG K\xca DỮ LIỆU T\xc0I NGUY\xcaN NƯỚC (",t,")"," "]})})},p=t(64715),y=t(98660),v=t(92054),_=t(14489),j=t(24570),Z=t(35376),f=e=>{let{data:n,loading:t}=e,a=n.total,c=n.btnmt,l=n.ubnd,o=["#0088FE","#FFBB28"],u=[{name:"BTNMT",value:c},{name:"UBND",value:l}];return(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(d.Z,{elevation:3,sx:{py:.5,mb:2,BorderRadius:0,textAlign:"center"},children:(0,i.jsx)(s.Z,{variant:"overline",sx:{fontWeight:"bold"},children:"giấy ph\xe9p đ\xe3 cấp"})}),t?(0,i.jsx)(Z.Z,{}):(0,i.jsxs)(r.ZP,{container:!0,children:[(0,i.jsxs)(r.ZP,{item:!0,xs:5,md:5,sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",alignItems:"center"},children:[(0,i.jsxs)(r.ZP,{item:!0,xs:12,sx:{textAlign:"center"},children:[(0,i.jsx)(s.Z,{sx:{fontWeight:"bold"},variant:"h6",children:"TỔNG SỐ"}),(0,i.jsx)(s.Z,{sx:{fontWeight:"bold"},variant:"h6",children:a})]}),(0,i.jsxs)(r.ZP,{item:!0,xs:12,px:4,children:[(0,i.jsx)(s.Z,{variant:"subtitle1",children:(0,i.jsxs)(s.Z,{sx:{fontWeight:"bold"},variant:"caption",children:["BTNMT: ",c]})}),(0,i.jsx)(s.Z,{variant:"subtitle1",children:(0,i.jsxs)(s.Z,{sx:{fontWeight:"bold"},variant:"caption",children:["UBND: ",l]})})]})]}),(0,i.jsx)(r.ZP,{item:!0,xs:7,md:7,children:(0,i.jsx)(p.h,{width:200,height:200,children:(0,i.jsxs)(y.u,{children:[(0,i.jsx)(v.b,{data:u,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:e=>{let{name:n,value:t}=e;return"".concat(n,": ").concat(t)},children:u.map((e,n)=>(0,i.jsx)(_.b,{fill:o[n%o.length]},"cell-".concat(n)))}),(0,i.jsx)(j.u,{})]})})})]})]})};function T(e){return null==e?void 0:e.toLocaleString("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0})}var k=e=>{var n,t;let{data:a,loading:r}=e,c=null==a?void 0:null===(n=a.btnmt)||void 0===n?void 0:n.reduce((e,n)=>e+(n.tongTienCQ||0),0),o=null==a?void 0:null===(t=a.ubnd)||void 0===t?void 0:t.reduce((e,n)=>e+(n.tongTienCQ||0),0);return(0,i.jsxs)(d.Z,{elevation:3,children:[(0,i.jsx)(d.Z,{elevation:3,sx:{py:.5,mb:2,BorderRadius:0,textAlign:"center"},children:(0,i.jsx)(s.Z,{variant:"overline",sx:{fontWeight:"bold"},children:"Tiền cấp quyền"})}),r?(0,i.jsx)(Z.Z,{}):(0,i.jsxs)(l.Z,{px:4,pb:4,children:[(0,i.jsxs)(l.Z,{sx:{textAlign:"center"},children:[(0,i.jsx)(s.Z,{sx:{fontWeight:"bold"},children:"TỔNG"}),(0,i.jsxs)(s.Z,{sx:{fontWeight:"bold"},children:[" ",T(c+o)," "]})]}),(0,i.jsxs)(s.Z,{sx:{textAlign:"left"},variant:"subtitle2",children:["BTNMT: ",T(c)," "]}),(0,i.jsxs)(s.Z,{sx:{textAlign:"left"},variant:"subtitle2",children:["UBND: ",T(o)," "]})]})]})},N=t(59701),C=t(64577),S=t(80539),w=t(51015),A=t(96216),I=t(85871),P=t(5152),B=t.n(P),D=t(95906),R=t(5531),W=t(72246);let K=B()(()=>Promise.all([t.e(4028),t.e(6002),t.e(9269),t.e(3701),t.e(4464),t.e(1845),t.e(7531),t.e(2573),t.e(7679),t.e(723),t.e(776),t.e(3355),t.e(3385),t.e(2777)]).then(t.bind(t,3385)),{loadableGenerated:{webpack:()=>[3385]},ssr:!1});var L=()=>{let[e]=(0,a.useState)([15.01,108.79]),[n]=(0,a.useState)(10),[t,r]=(0,a.useState)(!0),{consFilter:c}=(0,D.Z)(),o=(0,R.B)(1).initialItems,[u,h]=(0,a.useState)([]),[g,x]=(0,a.useState)(o),[m,b]=(0,a.useState)([]),[p,y]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{h((await C.congtrinhService.getAll({...c,pageNumber:1,pageSize:1e3})).items||[])})()},[]),(0,a.useEffect)(()=>{if(!(null==u?void 0:u.length)||!g.length){b([]);return}let e=new Set(g.map(e=>e.toLowerCase()));b(u.filter(n=>{var t,i;let a=(null===(i=n.loaiCT)||void 0===i?void 0:null===(t=i.maLoaiCT)||void 0===t?void 0:t.toString().toLowerCase())||"";return e.has(a)}))},[u,g]),(0,i.jsxs)(d.Z,{elevation:3,sx:{position:"relative",height:"calc(100vh - 170px)"},children:[(0,i.jsx)(d.Z,{elevation:3,sx:{py:.5,textAlign:"center"},children:(0,i.jsx)(s.Z,{variant:"overline",sx:{fontWeight:"bold"},children:"Bản đồ trạng th\xe1i c\xf4ng tr\xecnh"})}),(0,i.jsx)(S.Z,{in:t,children:(0,i.jsx)(l.Z,{className:"map-legend",sx:{background:"white",zIndex:999},children:(0,i.jsx)(W.Z,{consType:1,selectedItems:g,onTypeChange:e=>{x(e)},showLabel:p,setShowLabel:y})})}),(0,i.jsx)(w.Z,{className:"toggle-legend",variant:"outlined",onClick:()=>r(e=>!e),children:t?(0,i.jsx)(A.Z,{}):(0,i.jsx)(I.Z,{})}),(0,i.jsx)(K,{center:e,zoom:n,showLabel:p,mapData:m})]})},E=()=>{let[e,n]=(0,a.useState)({btnmt:[],ubnd:[]}),[t,c]=(0,a.useState)({total:0,btnmt:0,ubnd:0}),[l,s]=(0,a.useState)(!1),o=(0,a.useRef)(!0),{getUserInfo:u}=(0,N.Q)(),d=async()=>{s(!0);try{let e=await C.giayphepService.getTienCapQuyenList({startYear:1,endYear:2023,coquan_cp:"btnmt"}),t=await C.giayphepService.getTienCapQuyenList({startYear:1,endYear:2023,coquan_cp:"ubnd"});o.current&&n({btnmt:e,ubnd:t})}catch(e){console.error(e)}finally{s(!1)}},h=async()=>{try{let e=await C.giayphepService.getStatsByAuthorities();o.current&&e&&c({total:e.total,btnmt:e.btnmt,ubnd:e.ubndt})}catch(e){console.error(e)}};return(0,a.useEffect)(()=>(o.current=!0,()=>{o.current=!1}),[]),(0,a.useEffect)(()=>{d(),h()},[]),"Construction"==u().role?(0,i.jsx)(L,{}):(0,i.jsxs)(r.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(b,{})}),(0,i.jsxs)(r.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(m,{})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,sx:{marginTop:5},children:(0,i.jsx)(f,{data:t,loading:l})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,sx:{marginTop:5},children:(0,i.jsx)(k,{data:e,loading:l})})]}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(L,{})})]})},q=()=>(0,i.jsx)(E,{})}}]);