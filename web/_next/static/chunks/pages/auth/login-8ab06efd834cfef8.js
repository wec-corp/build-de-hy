(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9344],{40163:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return t(60729)}])},36488:function(e,n,t){"use strict";var r=t(85893),i=t(77527),s=t(60990);let o=(0,i.ZP)(s.Z)(e=>{let{theme:n}=e;return{height:"100vh","& .content-center":{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center",padding:n.spacing(5)},"& .content-right":{display:"flex",minHeight:"100vh",overflowX:"hidden",position:"relative",alignItems:"center",justifyContent:"right",padding:n.spacing(5)}}});n.Z=e=>{let{children:n}=e;return(0,r.jsx)(o,{className:"layout-wrapper",children:(0,r.jsx)(s.Z,{className:"app-content",sx:{minHeight:"100vh",overflowX:"hidden",position:"relative"},children:n})})}},60729:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var r=t(85893),i=t(67294),s=t(11163),o=t(60990),a=t(51015),l=t(12166),c=t(40492),h=t(94143),d=t(96788),u=t(52857),p=t(71919),m=t(6897),g=t(36307),x=t(77527),f=t(60762),j=t(95611),w=t(65806),Z=t(44723),v=t(97182),b=t(95898),y=t(42218),C=(0,t(13077).Z)((0,r.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),k=t(71466),P=t(36488),S=t(46735),_=t(3085),N=t(83454);let z=(0,x.ZP)(f.Z)(e=>{let{theme:n}=e;return{[n.breakpoints.up("sm")]:{width:"28rem"}}}),T=(0,x.ZP)("a")(e=>{let{theme:n}=e;return{fontSize:"0.875rem",textDecoration:"none",color:n.palette.primary.main}}),H=(0,x.ZP)(w.Z)(e=>{let{theme:n}=e;return{"& .MuiFormControlLabel-label":{fontSize:"0.875rem",color:n.palette.text.secondary}}}),M=()=>{let[e,n]=(0,i.useState)({username:"",password:"",showPassword:!1,rememberMe:!1}),[t,x]=(0,i.useState)(!1),[f,w]=(0,i.useState)(!1),{login:P,userInfo:M}=(0,S.aC)(),W=(0,s.useRouter)(),L=N.env.NEXT_PUBLIC_BASE_PATH||W.basePath||"",I=t=>r=>{n({...e,[t]:r.target.value})},B=async n=>{n.preventDefault(),w(!0),x(!1);try{let n=await fetch("".concat(_.apiUrl,"/Auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password,rememberMe:e.rememberMe})}),t=await n.json();t.success?(P(t.token),x(!1),"Construction"===M().role?await W.push("".concat(L,"/tai-nguyen-nuoc/giam-sat-ktsd")):await W.push("".concat(L,"/"))):x(!0)}catch(e){console.error("Login error:",e),x(!0)}finally{w(!1)}};return(0,r.jsx)(o.Z,{className:"bg",children:(0,r.jsx)(o.Z,{className:"content-center",children:(0,r.jsx)(z,{sx:{zIndex:1},children:(0,r.jsxs)(p.Z,{sx:{padding:e=>"".concat(e.spacing(12,9,7)," !important")},children:[(0,r.jsxs)(o.Z,{sx:{mb:3,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)("img",{src:"".concat(L,"/images/logos/logo_sotnmt.png"),width:70,height:70,alt:"logo-page"}),(0,r.jsx)(d.Z,{variant:"h6",align:"center",sx:{color:"#dc3545 !important",mt:2,mx:3,lineHeight:1,fontWeight:600,width:"100%",textTransform:"uppercase",fontSize:"1.5rem !important"},children:k.Z.templateName})]}),(0,r.jsx)(o.Z,{sx:{mb:6},children:(0,r.jsx)(d.Z,{variant:"overline",align:"center",sx:{fontWeight:600,marginBottom:1.5},children:"HỆ THỐNG QUẢN L\xdd CƠ SỞ DỮ LIỆU"})}),t&&(0,r.jsx)(o.Z,{sx:{mb:3},children:(0,r.jsx)(Z.Z,{severity:"error",children:"T\xe0i khoản hoặc mật khẩu kh\xf4ng ch\xednh x\xe1c!"})}),(0,r.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:B,children:[(0,r.jsx)(c.Z,{autoFocus:!0,fullWidth:!0,id:"username",label:(0,r.jsx)(d.Z,{variant:"overline",sx:{fontSize:14,fontWeight:600,lineHeight:0,transformOrigin:"center"},children:"T\xe0i khoản"}),sx:{marginBottom:4},value:e.username,onChange:I("username"),inputProps:{style:{paddingTop:10,paddingBottom:10,fontSize:15}}}),(0,r.jsxs)(m.Z,{fullWidth:!0,children:[(0,r.jsx)(h.Z,{htmlFor:"auth-login-password",children:(0,r.jsx)(d.Z,{variant:"overline",sx:{fontSize:14,fontWeight:600,lineHeight:0,transformOrigin:"center"},children:"Mật khẩu"})}),(0,r.jsx)(g.Z,{label:(0,r.jsx)(d.Z,{variant:"overline",sx:{fontSize:14,fontWeight:600,lineHeight:0,transformOrigin:"center"},children:"Mật khẩu"}),value:e.password,id:"auth-login-password",onChange:I("password"),type:e.showPassword?"text":"password",inputProps:{style:{paddingTop:10,paddingBottom:10,fontSize:15}},endAdornment:(0,r.jsx)(j.Z,{position:"end",children:(0,r.jsx)(u.Z,{edge:"end",onClick:()=>{n({...e,showPassword:!e.showPassword})},onMouseDown:e=>{e.preventDefault()},"aria-label":"toggle password visibility",children:e.showPassword?(0,r.jsx)(b.Z,{}):(0,r.jsx)(y.Z,{})})})})]}),(0,r.jsxs)(o.Z,{sx:{mb:4,display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between"},children:[(0,r.jsx)(H,{control:(0,r.jsx)(l.Z,{checked:e.rememberMe,onChange:I("rememberMe")}),label:"Lưu đăng nhập"}),(0,r.jsx)(T,{href:"".concat(L,"/"),onClick:e=>e.preventDefault(),children:"Qu\xean mật khẩu?"})]}),(0,r.jsx)(a.Z,{fullWidth:!0,size:"large",variant:"contained",sx:{marginBottom:7},type:"submit",disabled:f,endIcon:f?(0,r.jsx)(v.Z,{color:"inherit",size:20}):(0,r.jsx)(C,{}),children:"Đăng nhập"})]})]})})})})};M.getLayout=e=>(0,r.jsx)(P.Z,{children:e});var W=M}},function(e){e.O(0,[4581,492,9043,5280,2888,9774,179],function(){return e(e.s=40163)}),_N_E=e.O()}]);